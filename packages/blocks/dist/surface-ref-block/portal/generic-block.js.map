{"version":3,"file":"generic-block.js","sourceRoot":"","sources":["../../../src/surface-ref-block/portal/generic-block.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AAC1E,OAAO,EAAE,KAAK,EAAE,MAAM,0BAA0B,CAAC;AACjD,OAAO,EAAE,GAAG,EAAuB,MAAM,KAAK,CAAC;AAC/C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;IAG7B,4BAA4B;4BADxC,aAAa,CAAC,kCAAkC,CAAC;;;;sBACA,cAAc,CAC9D,iBAAiB,CAClB;;;;;;;;;;4CAFyC,SAAQ,WAEjD;;;;iCAkCE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;iCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;uCAa9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAf/B,oKAAS,KAAK,6BAAL,KAAK,qFAAU;YAGxB,oKAAS,KAAK,6BAAL,KAAK,qFAUK;YAGnB,sLAAS,WAAW,6BAAX,WAAW,iGAAyC;YArD/D,6KAsDC;;;;iBAnDiB,WAAM,GAAG,GAAG,CAAA;;;;GAI3B,AAJqB,CAIpB;QAEO,YAAY;YACnB,IAAI,CAAC,WAAW,CAAC,GAAG,CAClB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CACvD,CAAC;QACJ,CAAC;QAEQ,MAAM;YACb,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;YAC9B,MAAM,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAC5C,MAAM,KAAK,GAAG;gBACZ,QAAQ,EAAE,UAAU;gBACpB,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,KAAK,EAAE,GAAG,KAAK,CAAC,CAAC,IAAI;gBACrB,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,IAAI;gBACtB,SAAS,EAAE,aAAa,KAAK,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,KAAK;aACnD,CAAC;YAEF,OAAO,IAAI,CAAA;;gBAEC,QAAQ,CAAC,KAAK,CAAC;0CACW,KAAK,CAAC,EAAE;;UAExC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;;KAE5B,CAAC;QACJ,CAAC;QAGD,+EAAwB;QAAxB,IAAS,KAAK,2CAAU;QAAxB,IAAS,KAAK,iDAAU;QAGxB,oIAUmB;QAVnB,IAAS,KAAK,2CAUK;QAVnB,IAAS,KAAK,iDAUK;QAGnB,gJAA6D;QAA7D,IAAS,WAAW,iDAAyC;QAA7D,IAAS,WAAW,uDAAyC;;;;;;YArDlD,uDAA4B;;;;;SAA5B,4BAA4B","sourcesContent":["import type {\n  AttachmentBlockModel,\n  BookmarkBlockModel,\n  EmbedFigmaModel,\n  EmbedGithubModel,\n  EmbedHtmlModel,\n  EmbedLinkedDocModel,\n  EmbedLoomModel,\n  EmbedSyncedDocModel,\n  EmbedYoutubeModel,\n  ImageBlockModel,\n} from '@lumensuite/affine-model';\nimport type { BlockModel } from '@lumensuite/store';\n\nimport { ShadowlessElement, WithDisposable } from '@lumensuite/block-std';\nimport { Bound } from '@lumensuite/global/utils';\nimport { css, type TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { html } from 'lit/static-html.js';\n\n@customElement('surface-ref-generic-block-portal')\nexport class SurfaceRefGenericBlockPortal extends WithDisposable(\n  ShadowlessElement\n) {\n  static override styles = css`\n    surface-ref-generic-block-portal {\n      position: relative;\n    }\n  `;\n\n  override firstUpdated() {\n    this.disposables.add(\n      this.model.propsUpdated.on(() => this.requestUpdate())\n    );\n  }\n\n  override render() {\n    const { model, index } = this;\n    const bound = Bound.deserialize(model.xywh);\n    const style = {\n      position: 'absolute',\n      zIndex: `${index}`,\n      width: `${bound.w}px`,\n      height: `${bound.h}px`,\n      transform: `translate(${bound.x}px, ${bound.y}px)`,\n    };\n\n    return html`\n      <div\n        style=${styleMap(style)}\n        data-portal-reference-block-id=\"${model.id}\"\n      >\n        ${this.renderModel(model)}\n      </div>\n    `;\n  }\n\n  @property({ attribute: false })\n  accessor index!: number;\n\n  @property({ attribute: false })\n  accessor model!:\n    | ImageBlockModel\n    | AttachmentBlockModel\n    | BookmarkBlockModel\n    | EmbedGithubModel\n    | EmbedYoutubeModel\n    | EmbedFigmaModel\n    | EmbedLinkedDocModel\n    | EmbedSyncedDocModel\n    | EmbedHtmlModel\n    | EmbedLoomModel;\n\n  @property({ attribute: false })\n  accessor renderModel!: (model: BlockModel) => TemplateResult;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'surface-ref-generic-block-portal': SurfaceRefGenericBlockPortal;\n  }\n}\n"]}