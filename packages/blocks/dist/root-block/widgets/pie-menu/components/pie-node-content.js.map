{"version":3,"file":"pie-node-content.js","sourceRoot":"","sources":["../../../../../src/root-block/widgets/pie-menu/components/pie-node-content.ts"],"names":[],"mappings":"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","sourcesContent":["import { assertEquals } from '@blocksuite/global/utils';\nimport { css, html, LitElement, type PropertyValues } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\n\nimport type { PieNode } from '../node.js';\n\nimport { ColorUnit } from '../../../edgeless/components/panel/color-panel.js';\nimport { isSubmenuNode } from '../utils.js';\n\nconst styles = css`\n  .node-content > svg {\n    width: 24px;\n    height: 24px;\n  }\n\n  .node-content.center[active='true'] > svg,\n  .node-content.center[active='true'] > .color-unit,\n  .node-content.center[active='true'] > .color-unit > svg {\n    width: 2rem !important;\n    height: 2rem !important;\n  }\n`;\n\n@customElement('pie-node-content')\nexport class PieNodeContent extends LitElement {\n  static override styles = styles;\n\n  private _renderCenterNodeContent() {\n    if (isSubmenuNode(this.node.model) && !this.isActive) {\n      return this._renderChildNodeContent();\n    }\n\n    const { menu, model } = this.node;\n    const isActiveNode = menu.isActiveNode(this.node);\n    const hoveredNode = this.hoveredNode;\n\n    if (\n      this.isActive &&\n      isSubmenuNode(model) &&\n      model.role === 'color-picker'\n    ) {\n      if (!hoveredNode) return this.node.icon;\n\n      assertEquals(\n        hoveredNode.model.type,\n        'color',\n        'IPieSubMenuNode.role with color-picker should have children of type color'\n      );\n      const { color, hollowCircle } = hoveredNode.model;\n      return ColorUnit(color, { hollowCircle });\n    }\n\n    const { label } = model;\n    const centerLabelOrIcon = this.node.icon ?? label;\n\n    return isActiveNode\n      ? hoveredNode\n        ? hoveredNode.model.label\n        : centerLabelOrIcon\n      : centerLabelOrIcon;\n  }\n\n  private _renderChildNodeContent() {\n    return this.node.icon;\n  }\n\n  protected override render() {\n    const content = this.node.isCenterNode()\n      ? this._renderCenterNodeContent()\n      : this._renderChildNodeContent();\n\n    return html`\n      <div\n        active=\"${this.isActive.toString()}\"\n        class=\"node-content ${this.node.isCenterNode() ? 'center' : 'child'}\"\n      >\n        ${content}\n      </div>\n    `;\n  }\n\n  protected override updated(changedProperties: PropertyValues): void {\n    super.updated(changedProperties);\n\n    if (\n      !changedProperties.has('hoveredNode') ||\n      !this._nodeContentElement ||\n      !this.isActive\n    )\n      return;\n    const fadeIn = [\n      {\n        opacity: 0,\n      },\n      { opacity: 1 },\n    ];\n\n    this._nodeContentElement.animate(fadeIn, {\n      duration: 250,\n      easing: 'cubic-bezier(0.775, 1.325, 0.535, 1)',\n      fill: 'forwards' as const,\n    });\n  }\n\n  @query('.node-content')\n  private accessor _nodeContentElement!: HTMLDivElement;\n\n  @property({ attribute: false })\n  accessor hoveredNode!: PieNode | null;\n\n  @property({ attribute: false })\n  accessor isActive!: boolean;\n\n  @property({ attribute: false })\n  accessor node!: PieNode;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'pie-node-content': PieNodeContent;\n  }\n}\n"]}