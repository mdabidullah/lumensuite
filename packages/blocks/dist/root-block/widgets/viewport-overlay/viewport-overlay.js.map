{"version":3,"file":"viewport-overlay.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/viewport-overlay/viewport-overlay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,EAAE,eAAe,EAAE,MAAM,uBAAuB,CAAC;AACxD,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAChC,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACzD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AAIvD,MAAM,CAAC,MAAM,8BAA8B,GAAG,gCAAgC,CAAC;IAGlE,2BAA2B;4BADvC,aAAa,CAAC,8BAA8B,CAAC;;;;sBACG,eAAe;;;;2CAAvB,SAAQ,WAGhD;;;;yCAiEE,KAAK,EAAE;YACR,4LAAiB,aAAa,6BAAb,aAAa,qGAAS;YArEzC,6KAsEC;;;;iBAlEiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;GAa3B,AAbqB,CAapB;QAEO,iBAAiB;YACxB,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,WAAW,CACd,WAAW,EACX,GAAG,EAAE;gBACH,OAAO,IAAI,CAAC,aAAa,CAAC;YAC5B,CAAC,EACD,EAAE,MAAM,EAAE,IAAI,EAAE,CACjB,CAAC;YACF,IAAI,CAAC,WAAW,CACd,aAAa,EACb,GAAG,EAAE;gBACH,OAAO,IAAI,CAAC,aAAa,CAAC;YAC5B,CAAC,EACD,EAAE,MAAM,EAAE,IAAI,EAAE,CACjB,CAAC;YACF,IAAI,CAAC,WAAW,CACd,OAAO,EACP,GAAG,EAAE;gBACH,OAAO,IAAI,CAAC,aAAa,CAAC;YAC5B,CAAC,EACD,EAAE,MAAM,EAAE,IAAI,EAAE,CACjB,CAAC;QACJ,CAAC;QAED,IAAI;YACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC5B,CAAC;QAEQ,MAAM;YACb,MAAM,OAAO,GAAG,QAAQ,CAAC;gBACvB,gCAAgC,EAAE,IAAI;gBACtC,IAAI,EAAE,IAAI,CAAC,aAAa;aACzB,CAAC,CAAC;YACH,MAAM,KAAK,GAAG,QAAQ,CAAC;gBACrB,KAAK,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE;gBAC9C,MAAM,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE;aAC/C,CAAC,CAAC;YACH,OAAO,IAAI,CAAA,eAAe,OAAO,UAAU,KAAK,UAAU,CAAC;QAC7D,CAAC;QAED,UAAU;YACR,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;QAC3C,CAAC;QAED,MAAM;YACJ,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC7B,CAAC;QAGD,uFAAiC,KAAK,EAAC;QAAvC,IAAiB,aAAa,mDAAS;QAAvC,IAAiB,aAAa,yDAAS;;;;;;YArE5B,uDAA2B;;;;;SAA3B,2BAA2B","sourcesContent":["import type { RootBlockModel } from '@blocksuite/affine-model';\n\nimport { WidgetComponent } from '@blocksuite/block-std';\nimport { css, html } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport type { PageRootBlockComponent } from '../../index.js';\n\nexport const AFFINE_VIEWPORT_OVERLAY_WIDGET = 'affine-viewport-overlay-widget';\n\n@customElement(AFFINE_VIEWPORT_OVERLAY_WIDGET)\nexport class AffineViewportOverlayWidget extends WidgetComponent<\n  RootBlockModel,\n  PageRootBlockComponent\n> {\n  static override styles = css`\n    .affine-viewport-overlay-widget {\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: transparent;\n      pointer-events: none;\n      z-index: calc(var(--affine-z-index-popover) - 1);\n    }\n\n    .affine-viewport-overlay-widget.lock {\n      pointer-events: auto;\n    }\n  `;\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.handleEvent(\n      'dragStart',\n      () => {\n        return this._lockViewport;\n      },\n      { global: true }\n    );\n    this.handleEvent(\n      'pointerDown',\n      () => {\n        return this._lockViewport;\n      },\n      { global: true }\n    );\n    this.handleEvent(\n      'click',\n      () => {\n        return this._lockViewport;\n      },\n      { global: true }\n    );\n  }\n\n  lock() {\n    this._lockViewport = true;\n  }\n\n  override render() {\n    const classes = classMap({\n      'affine-viewport-overlay-widget': true,\n      lock: this._lockViewport,\n    });\n    const style = styleMap({\n      width: `${this._lockViewport ? '100vw' : '0'}`,\n      height: `${this._lockViewport ? '100%' : '0'}`,\n    });\n    return html` <div class=${classes} style=${style}></div> `;\n  }\n\n  toggleLock() {\n    this._lockViewport = !this._lockViewport;\n  }\n\n  unlock() {\n    this._lockViewport = false;\n  }\n\n  @state()\n  private accessor _lockViewport = false;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [AFFINE_VIEWPORT_OVERLAY_WIDGET]: AffineViewportOverlayWidget;\n  }\n}\n"]}