{"version":3,"file":"change-embed-card-button.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/element-toolbar/change-embed-card-button.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n  BookmarkBlockModel,\n  EmbedFigmaModel,\n  EmbedGithubModel,\n  EmbedHtmlModel,\n  EmbedLinkedDocModel,\n  EmbedLoomModel,\n  EmbedSyncedDocModel,\n  EmbedYoutubeModel,\n} from '@blocksuite/affine-model';\n\nimport {\n  CaptionIcon,\n  CenterPeekIcon,\n  CopyIcon,\n  EditIcon,\n  ExpandFullSmallIcon,\n  OpenIcon,\n  PaletteIcon,\n  SmallArrowDownIcon,\n} from '@blocksuite/affine-components/icons';\nimport { isPeekable, peek } from '@blocksuite/affine-components/peek';\nimport { toast } from '@blocksuite/affine-components/toast';\nimport {\n  type MenuItem,\n  renderToolbarSeparator,\n} from '@blocksuite/affine-components/toolbar';\nimport { BookmarkStyles } from '@blocksuite/affine-model';\nimport {\n  EmbedOptionProvider,\n  type EmbedOptions,\n} from '@blocksuite/affine-shared/services';\nimport { getHostName } from '@blocksuite/affine-shared/utils';\nimport { WithDisposable } from '@blocksuite/block-std';\nimport { Bound } from '@blocksuite/global/utils';\nimport { css, html, LitElement, nothing, type TemplateResult } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { join } from 'lit/directives/join.js';\nimport { repeat } from 'lit/directives/repeat.js';\n\nimport type { EmbedCardStyle } from '../../../_common/types.js';\nimport type { BookmarkBlockComponent } from '../../../bookmark-block/index.js';\nimport type { EmbedFigmaBlockComponent } from '../../../embed-figma-block/index.js';\nimport type { EmbedGithubBlockComponent } from '../../../embed-github-block/index.js';\nimport type { EmbedLinkedDocBlockComponent } from '../../../embed-linked-doc-block/index.js';\nimport type { EmbedLoomBlockComponent } from '../../../embed-loom-block/index.js';\nimport type { EmbedSyncedDocBlockComponent } from '../../../embed-synced-doc-block/index.js';\nimport type { EmbedYoutubeBlockComponent } from '../../../embed-youtube-block/index.js';\nimport type { EdgelessRootBlockComponent } from '../../edgeless/edgeless-root-block.js';\n\nimport { toggleEmbedCardEditModal } from '../../../_common/components/embed-card/modal/embed-card-edit-modal.js';\nimport {\n  EMBED_CARD_HEIGHT,\n  EMBED_CARD_WIDTH,\n} from '../../../_common/consts.js';\nimport { getEmbedCardIcons } from '../../../_common/utils/url.js';\nimport { isLinkToNode } from '../../../embed-linked-doc-block/utils.js';\nimport '../../edgeless/components/panel/card-style-panel.js';\nimport {\n  isBookmarkBlock,\n  isEmbedGithubBlock,\n  isEmbedHtmlBlock,\n  isEmbedLinkedDocBlock,\n  isEmbedSyncedDocBlock,\n} from '../../edgeless/utils/query.js';\n\n@customElement('edgeless-change-embed-card-button')\nexport class EdgelessChangeEmbedCardButton extends WithDisposable(LitElement) {\n  static override styles = css`\n    .affine-link-preview {\n      display: flex;\n      justify-content: flex-start;\n      width: 140px;\n      padding: var(--1, 0px);\n      border-radius: var(--1, 0px);\n      opacity: var(--add, 1);\n      user-select: none;\n      cursor: pointer;\n\n      color: var(--affine-link-color);\n      font-feature-settings:\n        'clig' off,\n        'liga' off;\n      font-family: var(--affine-font-family);\n      font-size: var(--affine-font-sm);\n      font-style: normal;\n      font-weight: 400;\n      text-decoration: none;\n      text-wrap: nowrap;\n    }\n\n    .affine-link-preview > span {\n      display: inline-block;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n\n      text-overflow: ellipsis;\n      overflow: hidden;\n      opacity: var(--add, 1);\n    }\n  `;\n\n  private _convertToCardView = () => {\n    if (this._isCardView) {\n      return;\n    }\n\n    const block = this._blockComponent;\n    if (block && 'convertToCard' in block) {\n      block.convertToCard();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    const { id, url, xywh, style, caption } = this.model;\n\n    let targetFlavour = 'affine:bookmark',\n      targetStyle = style;\n\n    if (this._embedOptions && this._embedOptions.viewType === 'card') {\n      const { flavour, styles } = this._embedOptions;\n      targetFlavour = flavour;\n      targetStyle = styles.includes(style) ? style : styles[0];\n    } else {\n      targetStyle = BookmarkStyles.includes(style) ? style : BookmarkStyles[0];\n    }\n\n    const bound = Bound.deserialize(xywh);\n    bound.w = EMBED_CARD_WIDTH[targetStyle];\n    bound.h = EMBED_CARD_HEIGHT[targetStyle];\n\n    const newId = this.edgeless.service.addBlock(\n      targetFlavour,\n      { url, xywh: bound.serialize(), style: targetStyle, caption },\n      this.edgeless.surface.model\n    );\n\n    this.std.command.exec('reassociateConnectors', {\n      oldId: id,\n      newId,\n    });\n\n    this.edgeless.service.selection.set({\n      editing: false,\n      elements: [newId],\n    });\n    this._doc.deleteBlock(this.model);\n  };\n\n  private _convertToEmbedView = () => {\n    if (this._isEmbedView) {\n      return;\n    }\n\n    const block = this._blockComponent;\n    if (block && 'convertToEmbed' in block) {\n      block.convertToEmbed();\n      return;\n    }\n\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    if (!this._embedOptions) return;\n\n    const { flavour, styles } = this._embedOptions;\n\n    const { id, url, xywh, style } = this.model;\n\n    const targetStyle = styles.includes(style) ? style : styles[0];\n\n    const bound = Bound.deserialize(xywh);\n    bound.w = EMBED_CARD_WIDTH[targetStyle];\n    bound.h = EMBED_CARD_HEIGHT[targetStyle];\n\n    const newId = this.edgeless.service.addBlock(\n      flavour,\n      {\n        url,\n        xywh: bound.serialize(),\n        style: targetStyle,\n      },\n      this.edgeless.surface.model\n    );\n\n    this.std.command.exec('reassociateConnectors', {\n      oldId: id,\n      newId,\n    });\n\n    this.edgeless.service.selection.set({\n      editing: false,\n      elements: [newId],\n    });\n    this._doc.deleteBlock(this.model);\n  };\n\n  private _copyUrl = () => {\n    if (!('url' in this.model)) {\n      return;\n    }\n\n    navigator.clipboard.writeText(this.model.url).catch(console.error);\n    toast(this.std.host, 'Copied link to clipboard');\n    this.edgeless.service.selection.clear();\n  };\n\n  private _embedOptions: EmbedOptions | null = null;\n\n  private _getScale = () => {\n    if ('scale' in this.model) {\n      return this.model.scale ?? 1;\n    } else if (isEmbedHtmlBlock(this.model)) {\n      return 1;\n    }\n\n    const bound = Bound.deserialize(this.model.xywh);\n    return bound.h / EMBED_CARD_HEIGHT[this.model.style];\n  };\n\n  private _open = () => {\n    this._blockComponent?.open();\n  };\n\n  private _peek = () => {\n    if (!this._blockComponent) return;\n    peek(this._blockComponent);\n  };\n\n  private get _blockComponent() {\n    const blockSelection =\n      this.edgeless.service.selection.surfaceSelections.filter(sel =>\n        sel.elements.includes(this.model.id)\n      );\n    if (blockSelection.length !== 1) {\n      return;\n    }\n\n    const blockComponent = this.std.view.getBlock(blockSelection[0].blockId) as\n      | BookmarkBlockComponent\n      | EmbedGithubBlockComponent\n      | EmbedYoutubeBlockComponent\n      | EmbedFigmaBlockComponent\n      | EmbedLinkedDocBlockComponent\n      | EmbedSyncedDocBlockComponent\n      | EmbedLoomBlockComponent\n      | null;\n\n    if (!blockComponent) return;\n\n    return blockComponent;\n  }\n\n  private get _canConvertToEmbedView() {\n    const block = this._blockComponent;\n\n    // synced doc entry controlled by awareness flag\n    if (!!block && isEmbedLinkedDocBlock(block.model)) {\n      const isSyncedDocEnabled = block.doc.awarenessStore.getFlag(\n        'enable_synced_doc_block'\n      );\n      if (!isSyncedDocEnabled) {\n        return false;\n      }\n    }\n\n    return (\n      (block && 'convertToEmbed' in block) ||\n      this._embedOptions?.viewType === 'embed'\n    );\n  }\n\n  private get _canShowCardStylePanel() {\n    return (\n      isBookmarkBlock(this.model) ||\n      isEmbedGithubBlock(this.model) ||\n      isEmbedLinkedDocBlock(this.model)\n    );\n  }\n\n  private get _canShowFullScreenButton() {\n    return isEmbedHtmlBlock(this.model);\n  }\n\n  private get _canShowUrlOptions() {\n    return (\n      'url' in this.model &&\n      (isBookmarkBlock(this.model) ||\n        isEmbedGithubBlock(this.model) ||\n        isEmbedLinkedDocBlock(this.model))\n    );\n  }\n\n  private get _doc() {\n    return this.model.doc;\n  }\n\n  private get _embedViewButtonDisabled() {\n    if (this._doc.readonly) {\n      return true;\n    }\n    return (\n      isEmbedLinkedDocBlock(this.model) &&\n      (isLinkToNode(this.model) ||\n        !!this._blockComponent?.closest('affine-embed-synced-doc-block') ||\n        this.model.pageId === this._doc.id)\n    );\n  }\n\n  private get _getCardStyleOptions(): {\n    style: EmbedCardStyle;\n    Icon: TemplateResult<1>;\n    tooltip: string;\n  }[] {\n    const {\n      EmbedCardHorizontalIcon,\n      EmbedCardListIcon,\n      EmbedCardVerticalIcon,\n      EmbedCardCubeIcon,\n    } = getEmbedCardIcons();\n    return [\n      {\n        style: 'horizontal',\n        Icon: EmbedCardHorizontalIcon,\n        tooltip: 'Large horizontal style',\n      },\n      {\n        style: 'list',\n        Icon: EmbedCardListIcon,\n        tooltip: 'Small horizontal style',\n      },\n      {\n        style: 'vertical',\n        Icon: EmbedCardVerticalIcon,\n        tooltip: 'Large vertical style',\n      },\n      {\n        style: 'cube',\n        Icon: EmbedCardCubeIcon,\n        tooltip: 'Small vertical style',\n      },\n    ];\n  }\n\n  private get _isCardView() {\n    if (isBookmarkBlock(this.model) || isEmbedLinkedDocBlock(this.model)) {\n      return true;\n    }\n    return this._embedOptions?.viewType === 'card';\n  }\n\n  private get _isEmbedView() {\n    return (\n      !isBookmarkBlock(this.model) &&\n      (isEmbedSyncedDocBlock(this.model) ||\n        this._embedOptions?.viewType === 'embed')\n    );\n  }\n\n  get _openButtonDisabled() {\n    return (\n      isEmbedLinkedDocBlock(this.model) && this.model.pageId === this._doc.id\n    );\n  }\n\n  private get _viewType(): 'inline' | 'embed' | 'card' {\n    if (this._isCardView) {\n      return 'card';\n    }\n\n    if (this._isEmbedView) {\n      return 'embed';\n    }\n\n    // unreachable\n    return 'inline';\n  }\n\n  private get std() {\n    return this.edgeless.std;\n  }\n\n  private _openMenuButton() {\n    const buttons: MenuItem[] = [];\n\n    if (\n      isEmbedLinkedDocBlock(this.model) ||\n      isEmbedSyncedDocBlock(this.model)\n    ) {\n      buttons.push({\n        type: 'open-this-doc',\n        label: 'Open this doc',\n        icon: ExpandFullSmallIcon,\n        action: this._open,\n        disabled: this._openButtonDisabled,\n      });\n    } else if (this._canShowFullScreenButton) {\n      buttons.push({\n        type: 'open-this-doc',\n        label: 'Open this doc',\n        icon: ExpandFullSmallIcon,\n        action: this._open,\n      });\n    }\n\n    // open in new tab\n\n    if (this._blockComponent && isPeekable(this._blockComponent)) {\n      buttons.push({\n        type: 'open-in-center-peek',\n        label: 'Open in center peek',\n        icon: CenterPeekIcon,\n        action: () => this._peek(),\n      });\n    }\n\n    // open in split view\n\n    if (buttons.length === 0) {\n      return nothing;\n    }\n\n    return html`\n      <editor-menu-button\n        .contentPadding=${'8px'}\n        .button=${html`\n          <editor-icon-button\n            aria-label=\"Open\"\n            .justify=${'space-between'}\n            .labelHeight=${'20px'}\n          >\n            ${OpenIcon}${SmallArrowDownIcon}\n          </editor-icon-button>\n        `}\n      >\n        <div data-size=\"small\" data-orientation=\"vertical\">\n          ${repeat(\n            buttons,\n            button => button.label,\n            ({ label, icon, action, disabled }) => html`\n              <editor-menu-action\n                aria-label=${ifDefined(label)}\n                ?disabled=${disabled}\n                @click=${action}\n              >\n                ${icon}<span class=\"label\">${label}</span>\n              </editor-menu-action>\n            `\n          )}\n        </div>\n      </editor-menu-button>\n    `;\n  }\n\n  private _setCardStyle(style: EmbedCardStyle) {\n    const bounds = Bound.deserialize(this.model.xywh);\n    bounds.w = EMBED_CARD_WIDTH[style];\n    bounds.h = EMBED_CARD_HEIGHT[style];\n    const xywh = bounds.serialize();\n    this.model.doc.updateBlock(this.model, { style, xywh });\n  }\n\n  private _setEmbedScale(scale: number) {\n    if (isEmbedHtmlBlock(this.model)) return;\n\n    const bound = Bound.deserialize(this.model.xywh);\n    if ('scale' in this.model) {\n      const oldScale = this.model.scale ?? 1;\n      const ratio = scale / oldScale;\n      bound.w *= ratio;\n      bound.h *= ratio;\n      const xywh = bound.serialize();\n      this.model.doc.updateBlock(this.model, { scale, xywh });\n    } else {\n      bound.h = EMBED_CARD_HEIGHT[this.model.style] * scale;\n      bound.w = EMBED_CARD_WIDTH[this.model.style] * scale;\n      const xywh = bound.serialize();\n      this.model.doc.updateBlock(this.model, { xywh });\n    }\n    this._embedScale = scale;\n  }\n\n  private _showCaption() {\n    this._blockComponent?.captionEditor?.show();\n  }\n\n  private _viewMenuButton() {\n    if (this._canConvertToEmbedView || this._isEmbedView) {\n      const buttons = [\n        {\n          type: 'card',\n          label: 'Card view',\n          handler: () => this._convertToCardView(),\n          disabled: this.model.doc.readonly,\n        },\n        {\n          type: 'embed',\n          label: 'Embed view',\n          handler: () => this._convertToEmbedView(),\n          disabled: this.model.doc.readonly || this._embedViewButtonDisabled,\n        },\n      ];\n\n      return html`\n        <editor-menu-button\n          .contentPadding=${'8px'}\n          .button=${html`\n            <editor-icon-button\n              aria-label=\"Switch view\"\n              .justify=${'space-between'}\n              .labelHeight=${'20px'}\n              .iconContainerWidth=${'110px'}\n            >\n              <div class=\"label\">\n                <span style=\"text-transform: capitalize\"\n                  >${this._viewType}</span\n                >\n                view\n              </div>\n              ${SmallArrowDownIcon}\n            </editor-icon-button>\n          `}\n        >\n          <div data-size=\"small\" data-orientation=\"vertical\">\n            ${repeat(\n              buttons,\n              button => button.type,\n              ({ type, label, handler, disabled }) => html`\n                <editor-menu-action\n                  data-testid=${`link-to-${type}`}\n                  aria-label=${ifDefined(label)}\n                  ?data-selected=${this._viewType === type}\n                  ?disabled=${disabled}\n                  @click=${handler}\n                >\n                  ${label}\n                </editor-menu-action>\n              `\n            )}\n          </div>\n        </editor-menu-button>\n      `;\n    }\n\n    return nothing;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this._embedScale = this._getScale();\n  }\n\n  override render() {\n    const model = this.model;\n    if ('url' in this.model) {\n      this._embedOptions = this.std\n        .get(EmbedOptionProvider)\n        .getEmbedBlockOptions(this.model.url);\n    }\n\n    const buttons = [\n      this._canShowUrlOptions && 'url' in model\n        ? html`\n            <a\n              class=\"affine-link-preview\"\n              href=${model.url}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              <span>${getHostName(model.url)}</span>\n            </a>\n\n            <editor-icon-button\n              aria-label=\"Click to copy link\"\n              .tooltip=${'Click to copy link'}\n              class=\"change-embed-card-button copy\"\n              ?disabled=${this._doc.readonly}\n              @click=${this._copyUrl}\n            >\n              ${CopyIcon}\n            </editor-icon-button>\n\n            <editor-icon-button\n              aria-label=\"Edit\"\n              .tooltip=${'Edit'}\n              class=\"change-embed-card-button edit\"\n              ?disabled=${this._doc.readonly}\n              @click=${() => toggleEmbedCardEditModal(this.std.host, model)}\n            >\n              ${EditIcon}\n            </editor-icon-button>\n          `\n        : nothing,\n\n      this._openMenuButton(),\n\n      this._viewMenuButton(),\n\n      'style' in model && this._canShowCardStylePanel\n        ? html`\n            <editor-menu-button\n              .contentPadding=${'8px'}\n              .button=${html`\n                <editor-icon-button\n                  aria-label=\"Card style\"\n                  .tooltip=${'Card style'}\n                >\n                  ${PaletteIcon}\n                </editor-icon-button>\n              `}\n            >\n              <card-style-panel\n                .value=${model.style}\n                .options=${this._getCardStyleOptions}\n                .onSelect=${(value: EmbedCardStyle) =>\n                  this._setCardStyle(value)}\n              >\n              </card-style-panel>\n            </editor-menu-button>\n          `\n        : nothing,\n\n      'caption' in model\n        ? html`\n            <editor-icon-button\n              aria-label=\"Add caption\"\n              .tooltip=${'Add caption'}\n              class=\"change-embed-card-button caption\"\n              ?disabled=${this._doc.readonly}\n              @click=${this._showCaption}\n            >\n              ${CaptionIcon}\n            </editor-icon-button>\n          `\n        : nothing,\n\n      this.quickConnectButton,\n\n      isEmbedHtmlBlock(model)\n        ? nothing\n        : html`\n            <editor-menu-button\n              .contentPadding=${'8px'}\n              .button=${html`\n                <editor-icon-button\n                  aria-label=\"Scale\"\n                  .tooltip=${'Scale'}\n                  .justify=${'space-between'}\n                  .iconContainerWidth=${'65px'}\n                  .labelHeight=${'20px'}\n                >\n                  <span class=\"label\">\n                    ${Math.round(this._embedScale * 100) + '%'}\n                  </span>\n                  ${SmallArrowDownIcon}\n                </editor-icon-button>\n              `}\n            >\n              <edgeless-scale-panel\n                class=\"embed-scale-popper\"\n                .scale=${Math.round(this._embedScale * 100)}\n                .onSelect=${(scale: number) => this._setEmbedScale(scale)}\n              ></edgeless-scale-panel>\n            </editor-menu-button>\n          `,\n    ];\n\n    return join(\n      buttons.filter(button => button !== nothing),\n      renderToolbarSeparator\n    );\n  }\n\n  @state()\n  private accessor _embedScale = 1;\n\n  @property({ attribute: false })\n  accessor edgeless!: EdgelessRootBlockComponent;\n\n  @property({ attribute: false })\n  accessor model!:\n    | BookmarkBlockModel\n    | EmbedGithubModel\n    | EmbedYoutubeModel\n    | EmbedFigmaModel\n    | EmbedLinkedDocModel\n    | EmbedSyncedDocModel\n    | EmbedHtmlModel\n    | EmbedLoomModel;\n\n  @property({ attribute: false })\n  accessor quickConnectButton!: TemplateResult<1> | typeof nothing;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-change-embed-card-button': EdgelessChangeEmbedCardButton;\n  }\n}\n\nexport function renderEmbedButton(\n  edgeless: EdgelessRootBlockComponent,\n  models?: EdgelessChangeEmbedCardButton['model'][],\n  quickConnectButton?: TemplateResult<1>[]\n) {\n  if (models?.length !== 1) return nothing;\n\n  return html`\n    <edgeless-change-embed-card-button\n      .model=${models[0]}\n      .edgeless=${edgeless}\n      .quickConnectButton=${quickConnectButton?.pop() ?? nothing}\n    ></edgeless-change-embed-card-button>\n  `;\n}\n"]}