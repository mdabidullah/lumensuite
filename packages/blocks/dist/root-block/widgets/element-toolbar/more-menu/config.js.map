{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../../../src/root-block/widgets/element-toolbar/more-menu/config.ts"],"names":[],"mappings":"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","sourcesContent":["import type { MenuItemGroup } from '@blocksuite/affine-components/toolbar';\n\nimport { isPeekable, peek } from '@blocksuite/affine-components/peek';\nimport { TelemetryProvider } from '@blocksuite/affine-shared/services';\nimport { Bound } from '@blocksuite/global/utils';\nimport {\n  ArrowDownBigBottomIcon,\n  ArrowDownBigIcon,\n  ArrowUpBigIcon,\n  ArrowUpBigTopIcon,\n  CenterPeekIcon,\n  CopyIcon,\n  DeleteIcon,\n  DuplicateIcon,\n  FrameIcon,\n  GroupIcon,\n  LinkedPageIcon,\n  OpenInNewIcon,\n  ResetIcon,\n} from '@blocksuite/icons/lit';\n\nimport type { AttachmentBlockComponent } from '../../../../attachment-block/attachment-block.js';\nimport type { BookmarkBlockComponent } from '../../../../bookmark-block/bookmark-block.js';\nimport type { EmbedFigmaBlockComponent } from '../../../../embed-figma-block/embed-figma-block.js';\nimport type { EmbedGithubBlockComponent } from '../../../../embed-github-block/embed-github-block.js';\nimport type { EmbedLoomBlockComponent } from '../../../../embed-loom-block/embed-loom-block.js';\nimport type { EmbedYoutubeBlockComponent } from '../../../../embed-youtube-block/embed-youtube-block.js';\nimport type { ImageBlockComponent } from '../../../../image-block/image-block.js';\nimport type { ElementToolbarMoreMenuContext } from './context.js';\n\nimport {\n  createLinkedDocFromEdgelessElements,\n  createLinkedDocFromNote,\n  notifyDocCreated,\n  promptDocTitle,\n} from '../../../../_common/utils/render-linked-doc.js';\nimport { edgelessElementsBound } from '../../../edgeless/utils/bound-utils.js';\nimport { duplicate } from '../../../edgeless/utils/clipboard-utils.js';\nimport { getSortedCloneElements } from '../../../edgeless/utils/clone-utils.js';\nimport { moveConnectors } from '../../../edgeless/utils/connector.js';\nimport { deleteElements } from '../../../edgeless/utils/crud.js';\n\ntype EmbedLinkBlockComponent =\n  | EmbedGithubBlockComponent\n  | EmbedFigmaBlockComponent\n  | EmbedLoomBlockComponent\n  | EmbedYoutubeBlockComponent;\n\ntype RefreshableBlockComponent =\n  | EmbedLinkBlockComponent\n  | ImageBlockComponent\n  | AttachmentBlockComponent\n  | BookmarkBlockComponent;\n\n// Section Group: frame & group\nexport const sectionGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'section',\n  items: [\n    {\n      icon: FrameIcon({ width: '20', height: '20' }),\n      label: 'Frame section',\n      type: 'create-frame',\n      action: ({ service, edgeless, std }) => {\n        const frame = service.frame.createFrameOnSelected();\n        if (!frame) return;\n\n        std.getOptional(TelemetryProvider)?.track('CanvasElementAdded', {\n          control: 'context-menu',\n          page: 'whiteboard editor',\n          module: 'toolbar',\n          segment: 'toolbar',\n          type: 'frame',\n        });\n\n        edgeless.surface.fitToViewport(Bound.deserialize(frame.xywh));\n      },\n    },\n    {\n      icon: GroupIcon({ width: '20', height: '20' }),\n      label: 'Group section',\n      type: 'create-group',\n      action: ({ service }) => {\n        service.createGroupFromSelected();\n      },\n      when: ctx => !ctx.hasFrame(),\n    },\n  ],\n};\n\n// Reorder Group\nexport const reorderGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'reorder',\n  items: [\n    {\n      icon: ArrowUpBigTopIcon({ width: '20', height: '20' }),\n      label: 'Bring to Front',\n      type: 'front',\n      action: ({ service, selectedElements }) => {\n        selectedElements.forEach(el => {\n          service.reorderElement(el, 'front');\n        });\n      },\n    },\n    {\n      icon: ArrowUpBigIcon({ width: '20', height: '20' }),\n      label: 'Bring Forward',\n      type: 'forward',\n      action: ({ service, selectedElements }) => {\n        selectedElements.forEach(el => {\n          service.reorderElement(el, 'forward');\n        });\n      },\n    },\n    {\n      icon: ArrowDownBigIcon({ width: '20', height: '20' }),\n      label: 'Send Backward',\n      type: 'backward',\n      action: ({ service, selectedElements }) => {\n        selectedElements.forEach(el => {\n          service.reorderElement(el, 'backward');\n        });\n      },\n    },\n    {\n      icon: ArrowDownBigBottomIcon({ width: '20', height: '20' }),\n      label: 'Send to Back',\n      type: 'back',\n      action: ({ service, selectedElements }) => {\n        selectedElements.forEach(el => {\n          service.reorderElement(el, 'back');\n        });\n      },\n    },\n  ],\n  when: ctx => !ctx.hasFrame(),\n};\n\n// Open Group\nexport const openGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'open',\n  items: [\n    {\n      icon: OpenInNewIcon({ width: '20', height: '20' }),\n      label: 'Open this doc',\n      type: 'open',\n      generate: ctx => {\n        const linkedDocBlock = ctx.getLinkedDocBlock();\n\n        if (!linkedDocBlock) return;\n\n        const disabled = linkedDocBlock.pageId === ctx.doc.id;\n\n        return {\n          action: () => {\n            const blockComponent = ctx.firstBlockComponent;\n\n            if (!blockComponent) return;\n            if (!('open' in blockComponent)) return;\n            if (typeof blockComponent.open !== 'function') return;\n\n            blockComponent.open();\n          },\n\n          disabled,\n        };\n      },\n    },\n    {\n      icon: CenterPeekIcon({ width: '20', height: '20' }),\n      label: 'Open in center peek',\n      type: 'center-peek',\n      generate: ctx => {\n        const valid =\n          ctx.isSingle() &&\n          !!ctx.firstBlockComponent &&\n          isPeekable(ctx.firstBlockComponent);\n\n        if (!valid) return;\n\n        return {\n          action: () => {\n            if (!ctx.firstBlockComponent) return;\n\n            peek(ctx.firstBlockComponent);\n          },\n        };\n      },\n    },\n  ],\n};\n\n// Clipboard Group\nexport const clipboardGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'clipboard',\n  items: [\n    {\n      icon: CopyIcon({ width: '20', height: '20' }),\n      label: 'Copy',\n      type: 'copy',\n      action: ({ edgeless }) => edgeless.clipboardController.copy(),\n    },\n    {\n      icon: DuplicateIcon({ width: '20', height: '20' }),\n      label: 'Duplicate',\n      type: 'duplicate',\n      action: ({ edgeless, selectedElements }) =>\n        duplicate(edgeless, selectedElements),\n    },\n    {\n      icon: ResetIcon({ width: '20', height: '20' }),\n      label: 'Reload',\n      type: 'reload',\n      generate: ctx => {\n        if (ctx.hasFrame()) {\n          return;\n        }\n\n        const blocks = ctx.selection.surfaceSelections\n          .map(s => ctx.getBlockComponent(s.blockId))\n          .filter(block => !!block)\n          .filter(block => ctx.refreshable(block.model));\n\n        if (\n          !blocks.length ||\n          blocks.length !== ctx.selection.surfaceSelections.length\n        ) {\n          return;\n        }\n\n        return {\n          action: () =>\n            blocks.forEach(block =>\n              (block as RefreshableBlockComponent).refreshData()\n            ),\n        };\n      },\n    },\n  ],\n};\n\n// Conversions Group\nexport const conversionsGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'conversions',\n  items: [\n    {\n      icon: LinkedPageIcon({ width: '20', height: '20' }),\n      label: 'Turn into linked doc',\n      type: 'turn-into-linked-doc',\n      action: async ctx => {\n        const { doc, service, surface, host, std } = ctx;\n        const element = ctx.getNoteBlock();\n        if (!element) return;\n\n        const title = await promptDocTitle(host);\n        if (title === null) return;\n\n        const linkedDoc = createLinkedDocFromNote(doc, element, title);\n        // insert linked doc card\n        const cardId = service.addBlock(\n          'affine:embed-synced-doc',\n          {\n            xywh: element.xywh,\n            style: 'syncedDoc',\n            pageId: linkedDoc.id,\n            index: element.index,\n          },\n          surface.model.id\n        );\n        std.getOptional(TelemetryProvider)?.track('CanvasElementAdded', {\n          control: 'context-menu',\n          page: 'whiteboard editor',\n          module: 'toolbar',\n          segment: 'toolbar',\n          type: 'embed-synced-doc',\n        });\n        std.getOptional(TelemetryProvider)?.track('DocCreated', {\n          control: 'turn into linked doc',\n          page: 'whiteboard editor',\n          module: 'format toolbar',\n          type: 'embed-linked-doc',\n        });\n        std.getOptional(TelemetryProvider)?.track('LinkedDocCreated', {\n          control: 'turn into linked doc',\n          page: 'whiteboard editor',\n          module: 'format toolbar',\n          type: 'embed-linked-doc',\n          other: 'new doc',\n        });\n        moveConnectors(element.id, cardId, service);\n        // delete selected note\n        doc.transact(() => {\n          doc.deleteBlock(element);\n        });\n        service.selection.set({\n          elements: [cardId],\n          editing: false,\n        });\n      },\n      when: ctx => !!ctx.getNoteBlock(),\n    },\n    {\n      icon: LinkedPageIcon({ width: '20', height: '20' }),\n      label: 'Create linked doc',\n      type: 'create-linked-doc',\n      action: async ({\n        doc,\n        selection,\n        service,\n        surface,\n        edgeless,\n        host,\n        std,\n      }) => {\n        const title = await promptDocTitle(host);\n        if (title === null) return;\n\n        const elements = getSortedCloneElements(selection.selectedElements);\n        const linkedDoc = createLinkedDocFromEdgelessElements(\n          host,\n          elements,\n          title\n        );\n        // insert linked doc card\n        const width = 364;\n        const height = 390;\n        const bound = edgelessElementsBound(elements);\n        const cardId = service.addBlock(\n          'affine:embed-linked-doc',\n          {\n            xywh: `[${bound.center[0] - width / 2}, ${bound.center[1] - height / 2}, ${width}, ${height}]`,\n            style: 'vertical',\n            pageId: linkedDoc.id,\n          },\n          surface.model.id\n        );\n        std.getOptional(TelemetryProvider)?.track('CanvasElementAdded', {\n          control: 'context-menu',\n          page: 'whiteboard editor',\n          module: 'toolbar',\n          segment: 'toolbar',\n          type: 'embed-linked-doc',\n        });\n        std.getOptional(TelemetryProvider)?.track('DocCreated', {\n          control: 'create linked doc',\n          page: 'whiteboard editor',\n          module: 'format toolbar',\n          type: 'embed-linked-doc',\n        });\n        std.getOptional(TelemetryProvider)?.track('LinkedDocCreated', {\n          control: 'create linked doc',\n          page: 'whiteboard editor',\n          module: 'format toolbar',\n          type: 'embed-linked-doc',\n          other: 'new doc',\n        });\n        // delete selected elements\n        doc.transact(() => {\n          deleteElements(edgeless, elements);\n        });\n        selection.set({\n          elements: [cardId],\n          editing: false,\n        });\n\n        notifyDocCreated(host, doc);\n      },\n      when: ctx => !(ctx.getLinkedDocBlock() || ctx.getNoteBlock()),\n    },\n  ],\n};\n\n// Delete Group\nexport const deleteGroup: MenuItemGroup<ElementToolbarMoreMenuContext> = {\n  type: 'delete',\n  items: [\n    {\n      icon: DeleteIcon({ width: '20', height: '20' }),\n      label: 'Delete',\n      type: 'delete',\n      action: ({ doc, selection, selectedElements, edgeless }) => {\n        doc.captureSync();\n        deleteElements(edgeless, selectedElements);\n\n        selection.set({\n          elements: [],\n          editing: false,\n        });\n      },\n    },\n  ],\n};\n\nexport const BUILT_IN_GROUPS = [\n  sectionGroup,\n  reorderGroup,\n  openGroup,\n  clipboardGroup,\n  conversionsGroup,\n  deleteGroup,\n];\n"]}