{"version":3,"file":"generating-placeholder.js","sourceRoot":"","sources":["../../../../../src/root-block/widgets/ai-panel/components/generating-placeholder.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EACL,eAAe,EACf,gBAAgB,GACjB,MAAM,qCAAqC,CAAC;AAC7C,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAChE,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,qBAAqB,CAAC;AAChD,OAAO,EACL,GAAG,EACH,IAAI,EACJ,UAAU,EACV,OAAO,EAEP,SAAS,GACV,MAAM,KAAK,CAAC;AACb,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;IAGtD,qBAAqB;4BAD1B,aAAa,CAAC,wBAAwB,CAAC;;;;sBACJ,cAAc,CAAC,UAAU,CAAC;;;;;;;;;;;;;qCAAlC,SAAQ,WAA0B;;;;kCA2G3D,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;2CAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;kCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAR/B,uKAAS,MAAM,6BAAN,MAAM,uFAAe;YAG9B,kMAAS,eAAe,6BAAf,eAAe,yGAAU;YAGlC,mLAAS,UAAU,6BAAV,UAAU,+FAAW;YAG9B,uKAAS,MAAM,6BAAN,MAAM,uFAAY;YArH7B,6KAsHC;;;;iBArHiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;qBAsBT,SAAS,CAAC,SAAS,CAAC,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAgDrD,AAtEqB,CAsEpB;QAEiB,MAAM;YACvB,MAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC;YACjC,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;YAEhE,OAAO,IAAI,CAAA;;oBAEK,IAAI,CAAC,MAAM;;;QAGvB,IAAI,CAAC,UAAU;gBACf,CAAC,CAAC,IAAI,CAAA,6CAA6C;gBACnD,CAAC,CAAC,OAAO;;;YAGL,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,eAAe;;;sCAG5B,WAAW;;cAEnC,IAAI,CAAC,eAAe,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM;;;aAG7C,CAAC;QACZ,CAAC;QAEQ,UAAU,CAAC,OAAuB;YACzC,IAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,CAAC;gBACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAC7B,CAAC,EACD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CACnD,CAAC;YACJ,CAAC;QACH,CAAC;QAGD,yEAA0B,GAAG,EAAC;QAA9B,IAAS,MAAM,4CAAe;QAA9B,IAAS,MAAM,kDAAe;QAG9B,yJAAkC;QAAlC,IAAS,eAAe,qDAAU;QAAlC,IAAS,eAAe,2DAAU;QAGlC,wJAA8B;QAA9B,IAAS,UAAU,gDAAW;QAA9B,IAAS,UAAU,sDAAW;QAG9B,2IAA2B;QAA3B,IAAS,MAAM,4CAAY;QAA3B,IAAS,MAAM,kDAAY;;;;;;YArHvB,uDAAqB","sourcesContent":["import {\n  DarkLoadingIcon,\n  LightLoadingIcon,\n} from '@lumensuite/affine-components/icons';\nimport { ThemeObserver } from '@lumensuite/affine-shared/theme';\nimport { WithDisposable } from '@lumensuite/block-std';\nimport { baseTheme } from '@toeverything/theme';\nimport {\n  css,\n  html,\n  LitElement,\n  nothing,\n  type PropertyValues,\n  unsafeCSS,\n} from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('generating-placeholder')\nclass GeneratingPlaceholder extends WithDisposable(LitElement) {\n  static override styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 4px;\n      margin-bottom: 8px;\n    }\n\n    .generating-header {\n      width: 100%;\n      font-size: var(--affine-font-xs);\n      font-style: normal;\n      font-weight: 500;\n      line-height: 20px;\n      height: 20px;\n    }\n\n    .generating-header,\n    .loading-progress {\n      color: var(--affine-text-secondary-color);\n      font-family: ${unsafeCSS(baseTheme.fontSansFamily)};\n    }\n\n    .generating-body {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      box-sizing: border-box;\n      width: 100%;\n      border-radius: 4px;\n      border: 2px solid var(--affine-primary-color, #1e96eb);\n      background: var(--affine-blue-50, #effaff);\n      color: var(--affine-brand-color);\n      gap: 4px;\n    }\n\n    .generating-icon {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 24px;\n    }\n\n    .generating-icon svg {\n      scale: 1.5;\n    }\n\n    .loading-progress {\n      display: flex;\n      flex-direction: column;\n      font-style: normal;\n      font-weight: 400;\n      text-align: center;\n      gap: 4px;\n    }\n\n    .loading-text {\n      font-size: var(--affine-font-base);\n      height: 24px;\n      line-height: 24px;\n    }\n\n    .loading-stage {\n      font-size: var(--affine-font-xs);\n      height: 20px;\n      line-height: 20px;\n    }\n  `;\n\n  protected override render() {\n    const theme = ThemeObserver.mode;\n    const loadingText = this.stages[this.loadingProgress - 1] || '';\n\n    return html`<style>\n        .generating-body {\n          height: ${this.height}px;\n        }\n      </style>\n      ${this.showHeader\n        ? html`<div class=\"generating-header\">Answer</div>`\n        : nothing}\n      <div class=\"generating-body\">\n        <div class=\"generating-icon\">\n          ${theme === 'light' ? LightLoadingIcon : DarkLoadingIcon}\n        </div>\n        <div class=\"loading-progress\">\n          <div class=\"loading-text\">${loadingText}</div>\n          <div class=\"loading-stage\">\n            ${this.loadingProgress} / ${this.stages.length}\n          </div>\n        </div>\n      </div>`;\n  }\n\n  override willUpdate(changed: PropertyValues) {\n    if (changed.has('loadingProgress')) {\n      this.loadingProgress = Math.max(\n        1,\n        Math.min(this.loadingProgress, this.stages.length)\n      );\n    }\n  }\n\n  @property({ attribute: false })\n  accessor height: number = 300;\n\n  @property({ attribute: false })\n  accessor loadingProgress!: number;\n\n  @property({ attribute: false })\n  accessor showHeader!: boolean;\n\n  @property({ attribute: false })\n  accessor stages!: string[];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'generating-placeholder': GeneratingPlaceholder;\n  }\n}\n"]}