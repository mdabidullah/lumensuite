{"version":3,"file":"edgeless-toolbar.js","sourceRoot":"","sources":["../../../../../src/root-block/edgeless/components/toolbar/edgeless-toolbar.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  type MenuHandler,\n  popMenu,\n} from '@blocksuite/affine-components/context-menu';\nimport {\n  ArrowLeftSmallIcon,\n  ArrowRightSmallIcon,\n  MoreHorizontalIcon,\n} from '@blocksuite/affine-components/icons';\nimport { ColorScheme } from '@blocksuite/affine-model';\nimport { ThemeObserver } from '@blocksuite/affine-shared/theme';\nimport { stopPropagation } from '@blocksuite/affine-shared/utils';\nimport { WithDisposable } from '@blocksuite/block-std';\nimport { debounce } from '@blocksuite/global/utils';\nimport { Slot } from '@blocksuite/store';\nimport { offset } from '@floating-ui/dom';\nimport { ContextProvider } from '@lit/context';\nimport { baseTheme, cssVar } from '@toeverything/theme';\nimport { css, html, LitElement, nothing, unsafeCSS } from 'lit';\nimport { customElement, query, state } from 'lit/decorators.js';\nimport { cache } from 'lit/directives/cache.js';\n\nimport type { EdgelessRootBlockComponent } from '../../edgeless-root-block.js';\nimport type { EdgelessTool } from '../../types.js';\nimport type { MenuPopper } from './common/create-popper.js';\n\nimport '../../../../_common/components/smooth-corner.js';\nimport '../buttons/tool-icon-button.js';\nimport '../buttons/toolbar-button.js';\nimport {\n  edgelessToolbarContext,\n  type EdgelessToolbarSlots,\n  edgelessToolbarSlotsContext,\n  edgelessToolbarThemeContext,\n} from './context.js';\nimport './present/frame-order-button.js';\nimport './presentation-toolbar.js';\nimport { getQuickTools, getSeniorTools } from './tools.js';\n\nconst TOOLBAR_PADDING_X = 12;\nconst TOOLBAR_HEIGHT = 64;\nconst QUICK_TOOLS_GAP = 10;\nconst QUICK_TOOL_SIZE = 36;\nconst QUICK_TOOL_MORE_SIZE = 20;\nconst SENIOR_TOOLS_GAP = 0;\nconst SENIOR_TOOL_WIDTH = 96;\nconst SENIOR_TOOL_NAV_SIZE = 20;\nconst DIVIDER_WIDTH = 8;\nconst DIVIDER_SPACE = 8;\nconst SAFE_AREA_WIDTH = 64;\n\n@customElement('edgeless-toolbar')\nexport class EdgelessToolbar extends WithDisposable(LitElement) {\n  static override styles = css`\n    :host {\n      font-family: ${unsafeCSS(baseTheme.fontSansFamily)};\n      position: absolute;\n      z-index: 1;\n      left: calc(50%);\n      transform: translateX(-50%);\n      bottom: 0;\n      -webkit-user-select: none;\n      user-select: none;\n      width: 100%;\n      pointer-events: none;\n    }\n    .edgeless-toolbar-wrapper {\n      width: 100%;\n      display: flex;\n      justify-content: center;\n    }\n    .edgeless-toolbar-toggle-control {\n      pointer-events: auto;\n      padding-bottom: 16px;\n      width: fit-content;\n      max-width: calc(100% - ${unsafeCSS(SAFE_AREA_WIDTH)}px * 2);\n      min-width: 264px;\n    }\n    .edgeless-toolbar-toggle-control[data-enable='true'] {\n      transition: 0.23s ease;\n      padding-top: 100px;\n      transform: translateY(100px);\n    }\n    .edgeless-toolbar-toggle-control[data-enable='true']:hover {\n      padding-top: 0;\n      transform: translateY(0);\n    }\n\n    .edgeless-toolbar-smooth-corner {\n      display: block;\n      width: fit-content;\n      max-width: 100%;\n    }\n    .edgeless-toolbar-container {\n      position: relative;\n      display: flex;\n      align-items: center;\n      padding: 0 ${unsafeCSS(TOOLBAR_PADDING_X)}px;\n      height: ${unsafeCSS(TOOLBAR_HEIGHT)}px;\n    }\n    :host([disabled]) .edgeless-toolbar-container {\n      pointer-events: none;\n    }\n    .edgeless-toolbar-container[level='second'] {\n      position: absolute;\n      bottom: 8px;\n      transform: translateY(-100%);\n    }\n    .edgeless-toolbar-container[hidden] {\n      display: none;\n    }\n    .quick-tools {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: ${unsafeCSS(QUICK_TOOLS_GAP)}px;\n    }\n    .full-divider {\n      width: ${unsafeCSS(DIVIDER_WIDTH)}px;\n      height: 100%;\n      margin: 0 ${unsafeCSS(DIVIDER_SPACE)}px;\n      flex-shrink: 0;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .full-divider::after {\n      content: '';\n      display: block;\n      width: 1px;\n      height: 100%;\n      background-color: var(--affine-border-color);\n    }\n    .brush-and-eraser {\n      display: flex;\n      height: 100%;\n      gap: 4px;\n      justify-content: center;\n    }\n    .senior-tools {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: ${unsafeCSS(SENIOR_TOOLS_GAP)}px;\n      height: 100%;\n      min-width: ${unsafeCSS(SENIOR_TOOL_WIDTH)}px;\n    }\n    .quick-tool-item {\n      width: ${unsafeCSS(QUICK_TOOL_SIZE)}px;\n      height: ${unsafeCSS(QUICK_TOOL_SIZE)}px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-shrink: 0;\n    }\n    .quick-tool-more {\n      width: 0;\n      height: ${unsafeCSS(QUICK_TOOL_SIZE)}px;\n      flex-shrink: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      transition: all 0.23s ease;\n      overflow: hidden;\n    }\n    [data-dense-quick='true'] .quick-tool-more {\n      width: ${unsafeCSS(QUICK_TOOL_MORE_SIZE)}px;\n      margin-left: ${unsafeCSS(DIVIDER_SPACE)}px;\n    }\n    .quick-tool-more-button {\n      padding: 0;\n    }\n\n    .senior-tool-item {\n      width: ${unsafeCSS(SENIOR_TOOL_WIDTH)}px;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-shrink: 0;\n    }\n    .senior-nav-button-wrapper {\n      flex-shrink: 0;\n      width: 0px;\n      height: ${unsafeCSS(SENIOR_TOOL_NAV_SIZE)}px;\n      transition: width 0.23s ease;\n      overflow: hidden;\n    }\n    .senior-nav-button {\n      padding: 0;\n    }\n    .senior-nav-button svg {\n      width: 20px;\n      height: 20px;\n    }\n    [data-dense-senior='true'] .senior-nav-button-wrapper {\n      width: ${unsafeCSS(SENIOR_TOOL_NAV_SIZE)}px;\n    }\n    [data-dense-senior='true'] .senior-nav-button-wrapper.prev {\n      margin-right: ${unsafeCSS(DIVIDER_SPACE)}px;\n    }\n    [data-dense-senior='true'] .senior-nav-button-wrapper.next {\n      margin-left: ${unsafeCSS(DIVIDER_SPACE)}px;\n    }\n    .transform-button svg {\n      transition: 0.3s ease-in-out;\n    }\n    .transform-button:hover svg {\n      transform: scale(1.15);\n    }\n  `;\n\n  private _moreQuickToolsMenu: MenuHandler | null = null;\n\n  private _moreQuickToolsMenuRef: HTMLElement | null = null;\n\n  private _onContainerResize = debounce(({ w }: { w: number }) => {\n    this.slots.resize.emit({ w, h: TOOLBAR_HEIGHT });\n    this.containerWidth = w;\n\n    if (this._denseSeniorTools) {\n      this.scrollSeniorToolIndex = Math.min(\n        this._seniorTools.length - this.scrollSeniorToolSize,\n        this.scrollSeniorToolIndex\n      );\n    } else {\n      this.scrollSeniorToolIndex = 0;\n    }\n\n    if (\n      this._denseQuickTools &&\n      this._moreQuickToolsMenu &&\n      this._moreQuickToolsMenuRef\n    ) {\n      this._moreQuickToolsMenu.close();\n      this._openMoreQuickToolsMenu({\n        currentTarget: this._moreQuickToolsMenuRef,\n      });\n    }\n    if (!this._denseQuickTools && this._moreQuickToolsMenu) {\n      this._moreQuickToolsMenu.close();\n      this._moreQuickToolsMenu = null;\n    }\n  }, 300);\n\n  private _resizeObserver: ResizeObserver | null = null;\n\n  private _slotsProvider = new ContextProvider(this, {\n    context: edgelessToolbarSlotsContext,\n    initialValue: { resize: new Slot() } satisfies EdgelessToolbarSlots,\n  });\n\n  private _themeProvider = new ContextProvider(this, {\n    context: edgelessToolbarThemeContext,\n    initialValue: ColorScheme.Light,\n  });\n\n  private _toolbarProvider = new ContextProvider(this, {\n    context: edgelessToolbarContext,\n    initialValue: this,\n  });\n\n  activePopper: MenuPopper<HTMLElement> | null = null;\n\n  edgeless: EdgelessRootBlockComponent;\n\n  setEdgelessTool = (edgelessTool: EdgelessTool) => {\n    this.edgeless.tools.setEdgelessTool(edgelessTool);\n  };\n\n  // calculate all the width manually\n  private get _availableWidth() {\n    return this.containerWidth - 2 * SAFE_AREA_WIDTH;\n  }\n\n  private get _cachedPresentHideToolbar() {\n    return !!this.edgeless.service.editPropsStore.getStorage(\n      'presentHideToolbar'\n    );\n  }\n\n  private get _denseQuickTools() {\n    return (\n      this._availableWidth -\n        this._seniorToolNavWidth -\n        1 * SENIOR_TOOL_WIDTH -\n        2 * TOOLBAR_PADDING_X <\n      this._quickToolsWidthTotal\n    );\n  }\n\n  private get _denseSeniorTools() {\n    return (\n      this._availableWidth -\n        this._quickToolsWidthTotal -\n        this._spaceWidthTotal <\n      this._seniorToolsWidthTotal\n    );\n  }\n\n  /**\n   * When enabled, the toolbar will auto-hide when the mouse is not over it.\n   */\n  private get _enableAutoHide() {\n    return (\n      this.isPresentMode &&\n      this._cachedPresentHideToolbar &&\n      !this.presentSettingMenuShow &&\n      !this.presentFrameMenuShow\n    );\n  }\n\n  private get _hiddenQuickTools() {\n    return this._quickTools\n      .slice(this._visibleQuickToolSize)\n      .filter(tool => !!tool.menu);\n  }\n\n  private get _quickTools() {\n    return getQuickTools({ edgeless: this.edgeless });\n  }\n\n  private get _quickToolsWidthTotal() {\n    return (\n      this._quickTools.length * (QUICK_TOOL_SIZE + QUICK_TOOLS_GAP) -\n      QUICK_TOOLS_GAP\n    );\n  }\n\n  private get _seniorNextTooltip() {\n    if (this._seniorScrollNextDisabled) return '';\n    const nextTool =\n      this._seniorTools[this.scrollSeniorToolIndex + this.scrollSeniorToolSize];\n    return nextTool?.name ?? '';\n  }\n\n  private get _seniorPrevTooltip() {\n    if (this._seniorScrollPrevDisabled) return '';\n    const prevTool = this._seniorTools[this.scrollSeniorToolIndex - 1];\n    return prevTool?.name ?? '';\n  }\n\n  private get _seniorScrollNextDisabled() {\n    return (\n      this.scrollSeniorToolIndex + this.scrollSeniorToolSize >=\n      this._seniorTools.length\n    );\n  }\n\n  private get _seniorScrollPrevDisabled() {\n    return this.scrollSeniorToolIndex === 0;\n  }\n\n  private get _seniorToolNavWidth() {\n    return this._denseSeniorTools\n      ? (SENIOR_TOOL_NAV_SIZE + DIVIDER_SPACE) * 2\n      : 0;\n  }\n\n  private get _seniorTools() {\n    return getSeniorTools({\n      edgeless: this.edgeless,\n      toolbarContainer: this.toolbarContainer,\n    });\n  }\n\n  private get _seniorToolsWidthTotal() {\n    return (\n      this._seniorTools.length * (SENIOR_TOOL_WIDTH + SENIOR_TOOLS_GAP) -\n      SENIOR_TOOLS_GAP\n    );\n  }\n\n  private get _spaceWidthTotal() {\n    return DIVIDER_WIDTH + DIVIDER_SPACE * 2 + TOOLBAR_PADDING_X * 2;\n  }\n\n  private get _visibleQuickToolSize() {\n    if (!this._denseQuickTools) return this._quickTools.length;\n    const availableWidth =\n      this._availableWidth -\n      this._seniorToolNavWidth -\n      this._spaceWidthTotal -\n      SENIOR_TOOL_WIDTH;\n    return Math.max(\n      1,\n      Math.floor(\n        (availableWidth - QUICK_TOOL_MORE_SIZE - DIVIDER_SPACE) /\n          (QUICK_TOOL_SIZE + QUICK_TOOLS_GAP)\n      )\n    );\n  }\n\n  get host() {\n    return this.edgeless.host;\n  }\n\n  get isPresentMode() {\n    return this.edgelessTool.type === 'frameNavigator';\n  }\n\n  get scrollSeniorToolSize() {\n    if (this._denseQuickTools) return 1;\n    const seniorAvailableWidth =\n      this._availableWidth - this._quickToolsWidthTotal - this._spaceWidthTotal;\n    if (seniorAvailableWidth >= this._seniorToolsWidthTotal)\n      return this._seniorTools.length;\n    return (\n      Math.floor(\n        (seniorAvailableWidth - (SENIOR_TOOL_NAV_SIZE + DIVIDER_SPACE) * 2) /\n          SENIOR_TOOL_WIDTH\n      ) || 1\n    );\n  }\n\n  get slots() {\n    return this._slotsProvider.value;\n  }\n\n  constructor(edgeless: EdgelessRootBlockComponent) {\n    super();\n    this.edgeless = edgeless;\n  }\n\n  private _onSeniorNavNext() {\n    if (this._seniorScrollNextDisabled) return;\n    this.scrollSeniorToolIndex = Math.min(\n      this._seniorTools.length - this.scrollSeniorToolSize,\n      this.scrollSeniorToolIndex + this.scrollSeniorToolSize\n    );\n  }\n\n  private _onSeniorNavPrev() {\n    if (this._seniorScrollPrevDisabled) return;\n    this.scrollSeniorToolIndex = Math.max(\n      0,\n      this.scrollSeniorToolIndex - this.scrollSeniorToolSize\n    );\n  }\n\n  private _openMoreQuickToolsMenu(e: { currentTarget: HTMLElement }) {\n    if (!this._hiddenQuickTools.length) return;\n\n    this._moreQuickToolsMenuRef = e.currentTarget;\n    this._moreQuickToolsMenu = popMenu(e.currentTarget as HTMLElement, {\n      placement: 'top',\n      middleware: [\n        offset({\n          mainAxis: (TOOLBAR_HEIGHT - QUICK_TOOL_MORE_SIZE) / 2 + 8,\n        }),\n      ],\n      options: {\n        onClose: () => {\n          this._moreQuickToolsMenu = null;\n          this._moreQuickToolsMenuRef = null;\n        },\n        items: this._hiddenQuickTools.map(tool => tool.menu!),\n      },\n    });\n  }\n\n  private _renderContent() {\n    return html`\n      <div class=\"quick-tools\">\n        ${this._quickTools\n          .slice(0, this._visibleQuickToolSize)\n          .map(\n            tool => html`<div class=\"quick-tool-item\">${tool.content}</div>`\n          )}\n      </div>\n      <div class=\"quick-tool-more\">\n        <icon-button\n          ?disabled=${!this._denseQuickTools}\n          .size=${20}\n          class=\"quick-tool-more-button\"\n          @click=${this._openMoreQuickToolsMenu}\n          ?active=${this._quickTools\n            .slice(this._visibleQuickToolSize)\n            .some(tool => tool.type === this.edgelessTool?.type)}\n        >\n          ${MoreHorizontalIcon}\n          <affine-tooltip tip-position=\"top\" .offset=${25}>\n            More Tools\n          </affine-tooltip>\n        </icon-button>\n      </div>\n      <div class=\"full-divider\"></div>\n      <div class=\"senior-nav-button-wrapper prev\">\n        <icon-button\n          .size=${20}\n          class=\"senior-nav-button\"\n          ?disabled=${this._seniorScrollPrevDisabled}\n          @click=${this._onSeniorNavPrev}\n        >\n          ${ArrowLeftSmallIcon}\n          ${cache(\n            this._seniorPrevTooltip\n              ? html` <affine-tooltip tip-position=\"top\" .offset=${4}>\n                  ${this._seniorPrevTooltip}\n                </affine-tooltip>`\n              : nothing\n          )}\n        </icon-button>\n      </div>\n      <div class=\"senior-tools\">\n        ${this._seniorTools\n          .slice(\n            this.scrollSeniorToolIndex,\n            this.scrollSeniorToolIndex + this.scrollSeniorToolSize\n          )\n          .map(\n            tool => html`<div class=\"senior-tool-item\">${tool.content}</div>`\n          )}\n      </div>\n      <div class=\"senior-nav-button-wrapper next\">\n        <icon-button\n          .size=${20}\n          class=\"senior-nav-button\"\n          ?disabled=${this._seniorScrollNextDisabled}\n          @click=${this._onSeniorNavNext}\n        >\n          ${ArrowRightSmallIcon}\n          ${cache(\n            this._seniorNextTooltip\n              ? html` <affine-tooltip tip-position=\"top\" .offset=${4}>\n                  ${this._seniorNextTooltip}\n                </affine-tooltip>`\n              : nothing\n          )}\n        </icon-button>\n      </div>\n    `;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this._toolbarProvider.setValue(this);\n    this._resizeObserver = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const { width } = entry.contentRect;\n        this._onContainerResize({ w: width });\n      }\n    });\n    this._resizeObserver.observe(this);\n    this._disposables.add(\n      ThemeObserver.subscribe(mode => this._themeProvider.setValue(mode))\n    );\n    this._disposables.add(\n      this.edgeless.slots.edgelessToolUpdated.on(tool => {\n        this.edgelessTool = tool;\n      })\n    );\n    this._disposables.add(\n      this.edgeless.bindHotKey(\n        {\n          Escape: () => {\n            if (this.edgeless.service.selection.editing) return;\n            if (this.edgelessTool.type === 'frameNavigator') return;\n            if (this.edgelessTool.type === 'default') {\n              if (this.activePopper) {\n                this.activePopper.dispose();\n                this.activePopper = null;\n              }\n              return;\n            }\n            this.setEdgelessTool({ type: 'default' });\n          },\n        },\n        { global: true }\n      )\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  }\n\n  override firstUpdated() {\n    const { _disposables, edgeless } = this;\n\n    _disposables.add(\n      edgeless.service.viewport.viewportUpdated.on(() => this.requestUpdate())\n    );\n    _disposables.add(\n      edgeless.slots.readonlyUpdated.on(() => {\n        this.requestUpdate();\n      })\n    );\n    _disposables.add(\n      edgeless.slots.toolbarLocked.on(disabled => {\n        this.toggleAttribute('disabled', disabled);\n      })\n    );\n    // This state from `editPropsStore` is not reactive,\n    // if the value is updated outside of this component, it will not be reflected.\n    _disposables.add(\n      this.edgeless.service.editPropsStore.slots.storageUpdated.on(\n        ({ key }) => {\n          if (key === 'presentHideToolbar') {\n            this.requestUpdate();\n          }\n        }\n      )\n    );\n  }\n\n  override render() {\n    const { type } = this.edgelessTool || {};\n    if (this.edgeless.doc.readonly && type !== 'frameNavigator') {\n      return nothing;\n    }\n\n    return html`\n      <div class=\"edgeless-toolbar-wrapper\">\n        <div\n          class=\"edgeless-toolbar-toggle-control\"\n          data-enable=${this._enableAutoHide}\n        >\n          <smooth-corner\n            class=\"edgeless-toolbar-smooth-corner\"\n            .borderRadius=${16}\n            .smooth=${0.7}\n            .borderWidth=${1}\n            .bgColor=${'var(--affine-background-overlay-panel-color)'}\n            .borderColor=${'var(--affine-border-color)'}\n            style=\"filter: drop-shadow(${cssVar('toolbarShadow')})\"\n          >\n            <div\n              class=\"edgeless-toolbar-container\"\n              data-dense-quick=${this._denseQuickTools &&\n              this._hiddenQuickTools.length > 0}\n              data-dense-senior=${this._denseSeniorTools}\n              @dblclick=${stopPropagation}\n              @mousedown=${stopPropagation}\n              @pointerdown=${stopPropagation}\n            >\n              <presentation-toolbar\n                .visible=${this.isPresentMode}\n                .edgeless=${this.edgeless}\n                .settingMenuShow=${this.presentSettingMenuShow}\n                .frameMenuShow=${this.presentFrameMenuShow}\n                .setSettingMenuShow=${(show: boolean) =>\n                  (this.presentSettingMenuShow = show)}\n                .setFrameMenuShow=${(show: boolean) =>\n                  (this.presentFrameMenuShow = show)}\n                .containerWidth=${this.containerWidth}\n              ></presentation-toolbar>\n              ${this.isPresentMode ? nothing : this._renderContent()}\n            </div>\n          </smooth-corner>\n        </div>\n      </div>\n    `;\n  }\n\n  @state()\n  accessor containerWidth = 1920;\n\n  @state()\n  accessor edgelessTool: EdgelessTool = {\n    type: localStorage.defaultTool ?? 'default',\n  };\n\n  @state()\n  accessor presentFrameMenuShow = false;\n\n  @state()\n  accessor presentSettingMenuShow = false;\n\n  @state()\n  accessor scrollSeniorToolIndex = 0;\n\n  @query('.edgeless-toolbar-container')\n  accessor toolbarContainer!: HTMLElement;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-toolbar': EdgelessToolbar;\n  }\n}\n"]}