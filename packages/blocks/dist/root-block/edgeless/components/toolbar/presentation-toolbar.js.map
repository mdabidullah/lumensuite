{"version":3,"file":"presentation-toolbar.js","sourceRoot":"","sources":["../../../../../src/root-block/edgeless/components/toolbar/presentation-toolbar.ts"],"names":[],"mappings":"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","sourcesContent":["import type { FrameBlockModel } from '@lumensuite/affine-model';\n\nimport { CommonUtils } from '@lumensuite/affine-block-surface';\nimport {\n  FrameNavigatorNextIcon,\n  FrameNavigatorPrevIcon,\n  NavigatorExitFullScreenIcon,\n  NavigatorFullScreenIcon,\n  StopAIIcon,\n} from '@lumensuite/affine-components/icons';\nimport { toast } from '@lumensuite/affine-components/toast';\nimport { Bound } from '@lumensuite/global/utils';\nimport { cssVar } from '@toeverything/theme';\nimport { css, html, LitElement, nothing, type PropertyValues } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\n\nimport type { NavigatorMode } from '../../../../_common/edgeless/frame/consts.js';\nimport type { EdgelessRootBlockComponent } from '../../edgeless-root-block.js';\nimport type { EdgelessTool } from '../../types.js';\n\nimport { isFrameBlock } from '../../utils/query.js';\nimport { launchIntoFullscreen } from '../utils.js';\nimport { EdgelessToolbarToolMixin } from './mixins/tool.mixin.js';\nimport './present/navigator-setting-button.js';\n\nconst { clamp } = CommonUtils;\n\n@customElement('presentation-toolbar')\nexport class PresentationToolbar extends EdgelessToolbarToolMixin(LitElement) {\n  static override styles = css`\n    :host {\n      align-items: inherit;\n      width: 100%;\n      height: 100%;\n      gap: 8px;\n      padding-right: 2px;\n    }\n    .full-divider {\n      width: 8px;\n      height: 100%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .full-divider::after {\n      content: '';\n      width: 1px;\n      height: 100%;\n      background: var(--affine-border-color);\n      transform: scaleX(0.5);\n    }\n    .config-buttons {\n      display: flex;\n      gap: 10px;\n    }\n    .edgeless-frame-navigator {\n      width: 140px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .edgeless-frame-navigator.dense {\n      width: auto;\n    }\n\n    .edgeless-frame-navigator-title {\n      display: inline-block;\n      cursor: pointer;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      padding-right: 8px;\n    }\n\n    .edgeless-frame-navigator-count {\n      color: var(--affine-text-secondary-color);\n      white-space: nowrap;\n    }\n    .edgeless-frame-navigator-stop {\n      border: none;\n      cursor: pointer;\n      padding: 4px;\n      border-radius: 8px;\n      position: relative;\n      overflow: hidden;\n\n      svg {\n        display: block;\n      }\n    }\n    .edgeless-frame-navigator-stop::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: transparent;\n      border-radius: inherit;\n    }\n    .edgeless-frame-navigator-stop:hover::before {\n      background: var(--affine-hover-color);\n    }\n  `;\n\n  private _cachedIndex = -1;\n\n  private _timer?: ReturnType<typeof setTimeout>;\n\n  override type: EdgelessTool['type'] = 'frameNavigator';\n\n  private get _cachedPresentHideToolbar() {\n    return !!this.edgeless.service.editPropsStore.getStorage(\n      'presentHideToolbar'\n    );\n  }\n\n  private set _cachedPresentHideToolbar(value) {\n    this.edgeless.service.editPropsStore.setStorage(\n      'presentHideToolbar',\n      !!value\n    );\n  }\n\n  private get _frames(): FrameBlockModel[] {\n    return this.edgeless.service.frames;\n  }\n\n  get dense() {\n    return this.containerWidth < 554;\n  }\n\n  get host() {\n    return this.edgeless.host;\n  }\n\n  constructor(edgeless: EdgelessRootBlockComponent) {\n    super();\n    this.edgeless = edgeless;\n  }\n\n  private _bindHotKey() {\n    const handleKeyIfFrameNavigator = (action: () => void) => () => {\n      if (this.edgelessTool.type === 'frameNavigator') {\n        action();\n      }\n    };\n\n    this.edgeless.bindHotKey(\n      {\n        ArrowLeft: handleKeyIfFrameNavigator(() => this._previousFrame()),\n        ArrowRight: handleKeyIfFrameNavigator(() => this._nextFrame()),\n        Escape: handleKeyIfFrameNavigator(() => this._exitPresentation()),\n      },\n      {\n        global: true,\n      }\n    );\n  }\n\n  private _exitPresentation() {\n    // When exit presentation mode, we need to set the tool to default or pan\n    // And exit fullscreen\n    this.setEdgelessTool(\n      this.edgeless.doc.readonly\n        ? { type: 'pan', panning: false }\n        : { type: 'default' }\n    );\n\n    if (document.fullscreenElement) {\n      document.exitFullscreen().catch(console.error);\n    }\n  }\n\n  private _moveToCurrentFrame() {\n    const current = this._currentFrameIndex;\n    const viewport = this.edgeless.service.viewport;\n    const frame = this._frames[current];\n\n    if (frame) {\n      let bound = Bound.deserialize(frame.xywh);\n\n      if (this._navigatorMode === 'fill') {\n        const vb = viewport.viewportBounds;\n        const center = bound.center;\n        let w, h;\n        if (vb.w / vb.h > bound.w / bound.h) {\n          w = bound.w;\n          h = (w * vb.h) / vb.w;\n        } else {\n          h = bound.h;\n          w = (h * vb.w) / vb.h;\n        }\n        bound = Bound.fromCenter(center, w, h);\n      }\n\n      viewport.setViewportByBound(bound, [0, 0, 0, 0], false);\n      this.edgeless.slots.navigatorFrameChanged.emit(\n        this._frames[this._currentFrameIndex]\n      );\n    }\n  }\n\n  private _nextFrame() {\n    const frames = this._frames;\n    const min = 0;\n    const max = frames.length - 1;\n    if (this._currentFrameIndex === frames.length - 1) {\n      toast(this.host, 'You have reached the last frame');\n    } else {\n      this._currentFrameIndex = clamp(this._currentFrameIndex + 1, min, max);\n    }\n  }\n\n  private _previousFrame() {\n    const frames = this._frames;\n    const min = 0;\n    const max = frames.length - 1;\n    if (this._currentFrameIndex === 0) {\n      toast(this.host, 'You have reached the first frame');\n    } else {\n      this._currentFrameIndex = clamp(this._currentFrameIndex - 1, min, max);\n    }\n  }\n\n  /**\n   * Toggle fullscreen, but keep edgeless tool to frameNavigator\n   * If already fullscreen, exit fullscreen\n   * If not fullscreen, enter fullscreen\n   */\n  private _toggleFullScreen() {\n    if (document.fullscreenElement) {\n      document.exitFullscreen().catch(console.error);\n      this._fullScreenMode = false;\n    } else {\n      launchIntoFullscreen(this.edgeless.viewportElement);\n      this._fullScreenMode = true;\n    }\n  }\n\n  override firstUpdated() {\n    const { _disposables, edgeless } = this;\n    const { slots } = edgeless;\n\n    this._bindHotKey();\n\n    _disposables.add(\n      slots.edgelessToolUpdated.on(tool => {\n        if (tool.type === 'frameNavigator') {\n          this._cachedIndex = this._currentFrameIndex;\n          this._navigatorMode = tool.mode ?? this._navigatorMode;\n          if (isFrameBlock(edgeless.service.selection.selectedElements[0])) {\n            this._cachedIndex = this._frames.findIndex(\n              frame =>\n                frame.id === edgeless.service.selection.selectedElements[0].id\n            );\n          }\n          if (this._frames.length === 0)\n            toast(\n              this.host,\n              'The presentation requires at least 1 frame. You can firstly create a frame.',\n              5000\n            );\n          this._toggleFullScreen();\n        }\n\n        this.requestUpdate();\n      })\n    );\n\n    _disposables.add(\n      edgeless.slots.navigatorSettingUpdated.on(({ fillScreen }) => {\n        if (fillScreen !== undefined) {\n          this._navigatorMode = fillScreen ? 'fill' : 'fit';\n        }\n      })\n    );\n\n    _disposables.addFromEvent(document, 'fullscreenchange', () => {\n      if (document.fullscreenElement) {\n        // When enter fullscreen, we need to set current frame to the cached index\n        this._timer = setTimeout(() => {\n          this._currentFrameIndex = this._cachedIndex;\n        }, 400);\n      } else {\n        // When exit fullscreen, we need to clear the timer\n        clearTimeout(this._timer);\n        if (\n          this.edgelessTool.type === 'frameNavigator' &&\n          this._fullScreenMode\n        ) {\n          this.setEdgelessTool(\n            this.edgeless.doc.readonly\n              ? { type: 'pan', panning: false }\n              : { type: 'default' }\n          );\n        }\n      }\n\n      setTimeout(() => this._moveToCurrentFrame(), 400);\n      this.edgeless.slots.fullScreenToggled.emit();\n    });\n\n    this._navigatorMode =\n      this.edgeless.service.editPropsStore.getStorage('presentFillScreen') ===\n      true\n        ? 'fill'\n        : 'fit';\n  }\n\n  override render() {\n    const current = this._currentFrameIndex;\n    const frames = this._frames;\n    const frame = frames[current];\n\n    return html`\n      <style>\n        :host {\n          display: ${this.visible ? 'flex' : 'none'};\n        }\n      </style>\n      <edgeless-tool-icon-button\n        .iconContainerPadding=${0}\n        .tooltip=${'Previous'}\n        @click=${() => this._previousFrame()}\n      >\n        ${FrameNavigatorPrevIcon}\n      </edgeless-tool-icon-button>\n\n      <div class=\"edgeless-frame-navigator ${this.dense ? 'dense' : ''}\">\n        ${this.dense\n          ? nothing\n          : html`<span\n              style=\"color: ${cssVar('textPrimaryColor')}\"\n              class=\"edgeless-frame-navigator-title\"\n              @click=${() => this._moveToCurrentFrame()}\n            >\n              ${frame?.title ?? 'no frame'}\n            </span>`}\n\n        <span class=\"edgeless-frame-navigator-count\">\n          ${frames.length === 0 ? 0 : current + 1} / ${frames.length}\n        </span>\n      </div>\n\n      <edgeless-tool-icon-button\n        .tooltip=${'Next'}\n        @click=${() => this._nextFrame()}\n        .iconContainerPadding=${0}\n      >\n        ${FrameNavigatorNextIcon}\n      </edgeless-tool-icon-button>\n\n      <div class=\"full-divider\"></div>\n\n      <div class=\"config-buttons\">\n        <edgeless-tool-icon-button\n          .tooltip=${document.fullscreenElement\n            ? 'Exit Full Screen'\n            : 'Enter Full Screen'}\n          @click=${() => this._toggleFullScreen()}\n          .iconContainerPadding=${0}\n          .iconContainerWidth=${'24px'}\n        >\n          ${document.fullscreenElement\n            ? NavigatorExitFullScreenIcon\n            : NavigatorFullScreenIcon}\n        </edgeless-tool-icon-button>\n\n        ${this.dense\n          ? nothing\n          : html`<edgeless-frame-order-button\n              .popperShow=${this.frameMenuShow}\n              .setPopperShow=${this.setFrameMenuShow}\n              .frames=${this._frames}\n              .edgeless=${this.edgeless}\n            >\n            </edgeless-frame-order-button>`}\n\n        <edgeless-navigator-setting-button\n          .edgeless=${this.edgeless}\n          .hideToolbar=${this._cachedPresentHideToolbar}\n          .onHideToolbarChange=${(hideToolbar: boolean) => {\n            this._cachedPresentHideToolbar = hideToolbar;\n          }}\n          .popperShow=${this.settingMenuShow}\n          .setPopperShow=${this.setSettingMenuShow}\n          .frames=${this._frames}\n          .includeFrameOrder=${this.dense}\n        >\n        </edgeless-navigator-setting-button>\n      </div>\n\n      <div class=\"full-divider\"></div>\n\n      <button\n        class=\"edgeless-frame-navigator-stop\"\n        @click=${this._exitPresentation}\n        style=\"background: ${cssVar('warningColor')}\"\n      >\n        ${StopAIIcon}\n      </button>\n    `;\n  }\n\n  protected override updated(changedProperties: PropertyValues) {\n    if (\n      changedProperties.has('_currentFrameIndex') &&\n      this.edgelessTool.type === 'frameNavigator'\n    ) {\n      this._moveToCurrentFrame();\n    }\n  }\n\n  @state({\n    hasChanged() {\n      return true;\n    },\n  })\n  private accessor _currentFrameIndex = 0;\n\n  private accessor _fullScreenMode = true;\n\n  @state()\n  private accessor _navigatorMode: NavigatorMode = 'fit';\n\n  @property({ attribute: false })\n  accessor containerWidth = 1920;\n\n  @property({ type: Boolean })\n  accessor frameMenuShow = false;\n\n  @property()\n  accessor setFrameMenuShow: (show: boolean) => void = () => {};\n\n  @property()\n  accessor setSettingMenuShow: (show: boolean) => void = () => {};\n\n  @property({ type: Boolean })\n  accessor settingMenuShow = false;\n\n  @property({ attribute: true, type: Boolean })\n  accessor visible = true;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'presentation-toolbar': PresentationToolbar;\n  }\n}\n"]}