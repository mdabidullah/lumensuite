{"version":3,"file":"block-zero-width.js","sourceRoot":"","sources":["../../../src/_common/components/block-zero-width.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,EAAE,cAAc,EAAE,MAAM,yCAAyC,CAAC;AACzE,OAAO,EAAE,eAAe,EAAE,MAAM,iCAAiC,CAAC;AAClE,OAAO,EAAE,gBAAgB,EAAE,MAAM,2BAA2B,CAAC;AAC7D,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;IAG/C,cAAc;4BAD1B,aAAa,CAAC,kBAAkB,CAAC;;;;sBACE,UAAU;;;;8BAAlB,SAAQ,WAAU;;;;iCAiC3C,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAC/B,oKAAS,KAAK,6BAAL,KAAK,qFAAkB;YAlClC,6KAmCC;;;;iBAlCiB,WAAM,GAAG,GAAG,CAAA;;;;;;;;GAQ3B,AARqB,CAQpB;QAEO,iBAAiB;YACxB,KAAK,CAAC,iBAAiB,EAAE,CAAC;QAC5B,CAAC;QAED,WAAW,CAAC,CAAa;YACvB,eAAe,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ;gBAAE,OAAO;YACpC,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACjE,IAAI,SAAS,EAAE,OAAO,KAAK,kBAAkB,EAAE,CAAC;gBAC9C,MAAM,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;oBACtE,EAAE,OAAO,EAAE,kBAAkB,EAAE;iBAChC,CAAC,CAAC;gBACH,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;YACnD,CAAC;QACH,CAAC;QAEQ,MAAM;YACb,OAAO,IAAI,CAAA,wCAAwC,IAAI,CAAC,WAAW;cACzD,gBAAgB;WACnB,CAAC;QACV,CAAC;QAGD,+EAAgC;QAAhC,IAAS,KAAK,2CAAkB;QAAhC,IAAS,KAAK,iDAAkB;;;;;;YAlCrB,uDAAc;;;;;SAAd,cAAc","sourcesContent":["import type { BlockComponent } from '@blocksuite/block-std';\n\nimport { focusTextModel } from '@blocksuite/affine-components/rich-text';\nimport { stopPropagation } from '@blocksuite/affine-shared/utils';\nimport { ZERO_WIDTH_SPACE } from '@blocksuite/inline/consts';\nimport { css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('block-zero-width')\nexport class BlockZeroWidth extends LitElement {\n  static override styles = css`\n    .block-zero-width {\n      position: absolute;\n      bottom: -10px;\n      width: 100%;\n      cursor: text;\n      z-index: 1;\n    }\n  `;\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n  handleClick(e: MouseEvent) {\n    stopPropagation(e);\n    if (this.block.doc.readonly) return;\n    const nextBlock = this.block.model.doc.getNext(this.block.model);\n    if (nextBlock?.flavour !== 'affine:paragraph') {\n      const [paragraphId] = this.block.doc.addSiblingBlocks(this.block.model, [\n        { flavour: 'affine:paragraph' },\n      ]);\n      focusTextModel(this.block.host.std, paragraphId);\n    }\n  }\n\n  override render() {\n    return html`<div class=\"block-zero-width\" @click=${this.handleClick}>\n      <span>${ZERO_WIDTH_SPACE}</span>\n    </div>`;\n  }\n\n  @property({ attribute: false })\n  accessor block!: BlockComponent;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'block-zero-width': BlockZeroWidth;\n  }\n}\n"]}