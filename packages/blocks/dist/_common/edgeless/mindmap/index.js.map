{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/_common/edgeless/mindmap/index.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,mBAAmB,EAAE,MAAM,kCAAkC,CAAC;AAEvE,MAAM,UAAU,aAAa,CAAC,EAA4B;IACxD,OAAO,CACL,EAAE,CAAC,KAAK,YAAY,mBAAmB,IAAI,EAAE,YAAY,mBAAmB,CAC7E,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,GAA+B;IACnE,OAAO,GAAG,CAAC,MAAM,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,YAAY,mBAAmB,CAAC;AACzE,CAAC;AAED,MAAM,UAAU,wBAAwB,CACtC,QAAkB,EAClB,OAAiC,EACjC,UAA4B,CAAC,CAAC,EAAE,CAAC,CAAC;IAElC,MAAM,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;IAE1C,OAAO,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;IAC5B,OAAO,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC;IAE5B,YAAY,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7B,YAAY,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7B,YAAY,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IAC7B,YAAY,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC;IAE7B,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;AACzD,CAAC;AAED,MAAM,UAAU,qBAAqB,CACnC,QAAkB,EAClB,OAAiC,EACjC,UAA4B,CAAC,CAAC,EAAE,CAAC,CAAC;IAElC,MAAM,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC;IAC9C,MAAM,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;IAC1C,IAAI,EAAE,GAAG,CAAC,CAAC;IACX,IAAI,EAAE,GAAG,CAAC,CAAC;IAEX,IAAI,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;QAClD,EAAE,GAAG,aAAa,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACvD,CAAC;SAAM,IACL,YAAY,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QAC5C,aAAa,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EACjC,CAAC;QACD,EAAE;YACA,aAAa,CAAC,CAAC;gBACf,aAAa,CAAC,CAAC;gBACf,CAAC,YAAY,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACnD,CAAC;IAED,IAAI,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EAAE,CAAC;QAClD,EAAE,GAAG,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC;IACrD,CAAC;SAAM,IACL,YAAY,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;QAC5C,aAAa,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,EACjC,CAAC;QACD,EAAE;YACA,YAAY,CAAC,CAAC;gBACd,YAAY,CAAC,CAAC;gBACd,OAAO,CAAC,CAAC,CAAC;gBACV,CAAC,aAAa,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;IAED,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAClB,CAAC","sourcesContent":["import type { Viewport } from '@blocksuite/block-std/gfx';\n\nimport { MindmapElementModel } from '@blocksuite/affine-block-surface';\n\nexport function isMindmapNode(el: BlockSuite.EdgelessModel) {\n  return (\n    el.group instanceof MindmapElementModel || el instanceof MindmapElementModel\n  );\n}\n\nexport function isSelectSingleMindMap(els: BlockSuite.EdgelessModel[]) {\n  return els.length === 1 && els[0].group instanceof MindmapElementModel;\n}\n\nexport function isElementOutsideViewport(\n  viewport: Viewport,\n  element: BlockSuite.EdgelessModel,\n  padding: [number, number] = [0, 0]\n) {\n  const elementBound = element.elementBound;\n\n  padding[0] /= viewport.zoom;\n  padding[1] /= viewport.zoom;\n\n  elementBound.x -= padding[1];\n  elementBound.w += padding[1];\n  elementBound.y -= padding[0];\n  elementBound.h += padding[0];\n\n  return !viewport.viewportBounds.contains(elementBound);\n}\n\nexport function getNearestTranslation(\n  viewport: Viewport,\n  element: BlockSuite.EdgelessModel,\n  padding: [number, number] = [0, 0]\n) {\n  const viewportBound = viewport.viewportBounds;\n  const elementBound = element.elementBound;\n  let dx = 0;\n  let dy = 0;\n\n  if (elementBound.x - padding[1] < viewportBound.x) {\n    dx = viewportBound.x - (elementBound.x - padding[1]);\n  } else if (\n    elementBound.x + elementBound.w + padding[1] >\n    viewportBound.x + viewportBound.w\n  ) {\n    dx =\n      viewportBound.x +\n      viewportBound.w -\n      (elementBound.x + elementBound.w + padding[1]);\n  }\n\n  if (elementBound.y - padding[0] < viewportBound.y) {\n    dy = elementBound.y - padding[0] - viewportBound.y;\n  } else if (\n    elementBound.y + elementBound.h + padding[0] >\n    viewportBound.y + viewportBound.h\n  ) {\n    dy =\n      elementBound.y +\n      elementBound.h +\n      padding[0] -\n      (viewportBound.y + viewportBound.h);\n  }\n\n  return [dx, dy];\n}\n"]}