{"version":3,"file":"insert-bookmark.js","sourceRoot":"","sources":["../../../src/bookmark-block/commands/insert-bookmark.ts"],"names":[],"mappings":"AAGA,OAAO,EAAE,mBAAmB,EAAE,MAAM,oCAAoC,CAAC;AAEzE,OAAO,EAAE,eAAe,EAAE,MAAM,uDAAuD,CAAC;AAExF,MAAM,CAAC,MAAM,qBAAqB,GAI9B,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;IAChB,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC;IACzB,MAAM,YAAY,GAAG,GAAG,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;IAE5E,IAAI,OAAO,GAAG,iBAAiB,CAAC;IAChC,IAAI,WAAW,GAAmB,UAAU,CAAC;IAC7C,MAAM,KAAK,GAA4B,EAAE,GAAG,EAAE,CAAC;IAC/C,IAAI,YAAY,EAAE,CAAC;QACjB,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC;QAC/B,WAAW,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACvC,CAAC;IACD,eAAe,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;IACtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC","sourcesContent":["import type { EmbedCardStyle } from '@blocksuite/affine-model';\nimport type { Command } from '@blocksuite/block-std';\n\nimport { EmbedOptionProvider } from '@blocksuite/affine-shared/services';\n\nimport { insertEmbedCard } from '../../_common/embed-block-helper/insert-embed-card.js';\n\nexport const insertBookmarkCommand: Command<\n  never,\n  'insertedLinkType',\n  { url: string }\n> = (ctx, next) => {\n  const { url, std } = ctx;\n  const embedOptions = std.get(EmbedOptionProvider).getEmbedBlockOptions(url);\n\n  let flavour = 'affine:bookmark';\n  let targetStyle: EmbedCardStyle = 'vertical';\n  const props: Record<string, unknown> = { url };\n  if (embedOptions) {\n    flavour = embedOptions.flavour;\n    targetStyle = embedOptions.styles[0];\n  }\n  insertEmbedCard(std, { flavour, targetStyle, props });\n  next();\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface Commands {\n      insertBookmark: typeof insertBookmarkCommand;\n    }\n  }\n}\n"]}