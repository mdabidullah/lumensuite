{"version":3,"file":"append-paragraph.js","sourceRoot":"","sources":["../../src/commands/append-paragraph.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,cAAc,EAAE,MAAM,yCAAyC,CAAC;AACzE,OAAO,EAAE,gBAAgB,EAAE,MAAM,iCAAiC,CAAC;AAEnE;;GAEG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAI/B,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;IAChB,MAAM,EAAE,GAAG,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,CAAC;IAC/B,MAAM,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC;IACpB,IAAI,CAAC,GAAG,CAAC,IAAI;QAAE,OAAO;IAEtB,MAAM,IAAI,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC;IACnC,IAAI,MAAM,GAAG,IAAI,EAAE,EAAE,CAAC;IACtB,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,MAAM,GAAG,GAAG,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACxD,CAAC;IACD,MAAM,EAAE,GAAG,GAAG,CAAC,QAAQ,CACrB,kBAAkB,EAClB,EAAE,IAAI,EAAE,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAC5B,MAAM,CACP,CAAC;IAEF,cAAc,CAAC,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACrC,IAAI,EAAE,CAAC;AACT,CAAC,CAAC","sourcesContent":["import type { Command } from '@blocksuite/block-std';\n\nimport { focusTextModel } from '@blocksuite/affine-components/rich-text';\nimport { getLastNoteBlock } from '@blocksuite/affine-shared/utils';\n\n/**\n * Append a paragraph block at the end of the whole page.\n */\nexport const appendParagraphCommand: Command<\n  never,\n  never,\n  { text?: string }\n> = (ctx, next) => {\n  const { std, text = '' } = ctx;\n  const { doc } = std;\n  if (!doc.root) return;\n\n  const note = getLastNoteBlock(doc);\n  let noteId = note?.id;\n  if (!noteId) {\n    noteId = doc.addBlock('affine:note', {}, doc.root.id);\n  }\n  const id = doc.addBlock(\n    'affine:paragraph',\n    { text: new doc.Text(text) },\n    noteId\n  );\n\n  focusTextModel(std, id, text.length);\n  next();\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface Commands {\n      appendParagraph: typeof appendParagraphCommand;\n    }\n  }\n}\n"]}