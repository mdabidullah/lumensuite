{"version":3,"file":"portal.js","sourceRoot":"","sources":["../../src/portal/portal.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAE5D;;;;;;;;;;;;;;;GAeG;IAEU,MAAM;4BADlB,aAAa,CAAC,mBAAmB,CAAC;;;;sBACP,UAAU;;;;;;;;;;sBAAlB,SAAQ,WAAU;;;;qCA0BnC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;qCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;oCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAL/B,gLAAS,SAAS,6BAAT,SAAS,6FAAiB;YAGnC,gLAAS,SAAS,6BAAT,SAAS,6FAAkC;YAGpD,6KAAS,QAAQ,6BAAR,QAAQ,2FAAU;YAjC7B,6KAkCC;;;YAlCY,uDAAM;;QAGR,gBAAgB;YACvB,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACjD,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS;gBAC/B,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC;oBACtB,IAAI,EAAE,MAAM;oBACZ,GAAG,CAAC,OAAO,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;iBAC/D,CAAC;gBACJ,CAAC,CAAC,UAAU,CAAC;YACf,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;YAC9C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;YAClC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,OAAO,UAAU,CAAC;QACpB,CAAC;QAEQ,oBAAoB;YAC3B,KAAK,CAAC,oBAAoB,EAAE,CAAC;YAC7B,IAAI,CAAC,WAAW,EAAE,MAAM,EAAE,CAAC;QAC7B,CAAC;QAEQ,MAAM;YACb,OAAO,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC;QAGD,4BAAmC;QAAnC,IAAS,SAAS,+CAAiB;QAAnC,IAAS,SAAS,qDAAiB;QAGnC,4BAAoD;QAApD,IAAS,SAAS,+CAAkC;QAApD,IAAS,SAAS,qDAAkC;QAGpD,2BAA2B;QAA3B,IAAS,QAAQ,8CAAU;QAA3B,IAAS,QAAQ,oDAAU;;;YAhCnB,gBAAW,GAAuB,IAAI,CAAC;YA0BtC,oFAAY,QAAQ,CAAC,IAAI,EAAC;YAG1B,4IAAsC,IAAI,GAAC;YAG3C,0IAAW,IAAI,CAAA,EAAE,GAAC;;;;;;SAjChB,MAAM","sourcesContent":["import { html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n/**\n * Renders a template into a portal. Defaults to `document.body`.\n *\n * Note that every time the parent component re-renders, the portal will be re-called.\n *\n * See https://lit.dev/docs/components/rendering/#writing-a-good-render()-method\n *\n * @example\n * ```ts\n * render() {\n *   return html`${showPortal\n *     ? html`<blocksuite-portal .template=${portalTemplate}></blocksuite-portal>`\n *     : null}`;\n * };\n * ```\n */\n@customElement('blocksuite-portal')\nexport class Portal extends LitElement {\n  private _portalRoot: HTMLElement | null = null;\n\n  override createRenderRoot() {\n    const portalRoot = document.createElement('div');\n    const renderRoot = this.shadowDom\n      ? portalRoot.attachShadow({\n          mode: 'open',\n          ...(typeof this.shadowDom !== 'boolean' ? this.shadowDom : {}),\n        })\n      : portalRoot;\n    portalRoot.classList.add('blocksuite-portal');\n    this.container.append(portalRoot);\n    this._portalRoot = portalRoot;\n    return renderRoot;\n  }\n\n  override disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this._portalRoot?.remove();\n  }\n\n  override render() {\n    return this.template;\n  }\n\n  @property({ attribute: false })\n  accessor container = document.body;\n\n  @property({ attribute: false })\n  accessor shadowDom: boolean | ShadowRootInit = true;\n\n  @property({ attribute: false })\n  accessor template = html``;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'blocksuite-portal': Portal;\n  }\n}\n"]}