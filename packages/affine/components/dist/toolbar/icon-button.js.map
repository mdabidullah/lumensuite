{"version":3,"file":"icon-button.js","sourceRoot":"","sources":["../../src/toolbar/icon-button.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Placement } from '@floating-ui/dom';\nimport type { TemplateResult } from 'lit';\n\nimport { css, html, LitElement, nothing } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { cache } from 'lit/directives/cache.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport './tooltip.js';\n\n@customElement('editor-icon-button')\nexport class EditorIconButton extends LitElement {\n  static override styles = css`\n    :host([disabled]),\n    :host(:disabled) {\n      pointer-events: none;\n      cursor: not-allowed;\n      color: var(--affine-text-disable-color);\n    }\n\n    .icon-container {\n      position: relative;\n      display: flex;\n      align-items: center;\n      padding: var(--icon-container-padding);\n      color: var(--affine-icon-color);\n      border-radius: 4px;\n      cursor: pointer;\n      white-space: nowrap;\n      box-sizing: border-box;\n      width: var(--icon-container-width, unset);\n      justify-content: var(--justify, unset);\n      user-select: none;\n    }\n\n    :host([active]) .icon-container.active-mode-color {\n      color: var(--affine-primary-color);\n    }\n\n    :host([active]) .icon-container.active-mode-background {\n      background: var(--affine-hover-color);\n    }\n\n    .icon-container[coming] {\n      cursor: not-allowed;\n      color: var(--affine-text-disable-color);\n    }\n\n    ::slotted(svg) {\n      flex-shrink: 0;\n      width: var(--icon-size, unset);\n      height: var(--icon-size, unset);\n    }\n\n    ::slotted(.label) {\n      flex: 1;\n      padding: 0 4px;\n      overflow: hidden;\n      white-space: nowrap;\n      line-height: var(--label-height, inherit);\n    }\n    ::slotted(.label.padding0) {\n      padding: 0;\n    }\n    ::slotted(.label.ellipsis) {\n      text-overflow: ellipsis;\n    }\n    ::slotted(.label.medium) {\n      font-weight: 500;\n    }\n\n    .icon-container[with-hover]::before {\n      content: '';\n      display: block;\n      background: var(--affine-hover-color);\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      border-radius: 4px;\n    }\n  `;\n\n  constructor() {\n    super();\n\n    // Allow activate button by pressing Enter key\n    this.addEventListener('keypress', event => {\n      if (this.disabled) {\n        return;\n      }\n      if (event.key === 'Enter' && !event.isComposing) {\n        this.click();\n      }\n    });\n\n    // Prevent click event when disabled\n    this.addEventListener(\n      'click',\n      event => {\n        if (this.disabled) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      },\n      { capture: true }\n    );\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this.tabIndex = 0;\n    this.role = 'button';\n  }\n\n  override render() {\n    const tooltip = this.coming ? '(Coming soon)' : this.tooltip;\n    const classnames = `icon-container active-mode-${this.activeMode} ${this.hoverState ? 'hovered' : ''}`;\n    const padding = this.iconContainerPadding;\n    const iconContainerStyles = styleMap({\n      '--icon-container-width': this.iconContainerWidth,\n      '--icon-container-padding': Array.isArray(padding)\n        ? padding.map(v => `${v}px`).join(' ')\n        : `${padding}px`,\n      '--icon-size': this.iconSize,\n      '--justify': this.justify,\n      '--label-height': this.labelHeight,\n    });\n\n    return html`\n      <style>\n        .icon-container:hover,\n        .icon-container.hovered {\n          background: ${this.hover ? `var(--affine-hover-color)` : 'inherit'};\n        }\n      </style>\n      <div\n        class=${classnames}\n        style=${iconContainerStyles}\n        ?with-hover=${this.withHover}\n        ?disabled=${this.disabled}\n      >\n        <slot></slot>\n        ${cache(\n          this.showTooltip && tooltip\n            ? html`<affine-tooltip\n                tip-position=${this.tipPosition}\n                .arrow=${this.arrow}\n                .offset=${this.tooltipOffset}\n                >${tooltip}</affine-tooltip\n              >`\n            : nothing\n        )}\n      </div>\n    `;\n  }\n\n  @property({ type: Boolean, reflect: true })\n  accessor active = false;\n\n  @property({ attribute: false })\n  accessor activeMode: 'color' | 'background' = 'color';\n\n  @property({ attribute: false })\n  accessor arrow = true;\n\n  @property({ attribute: false })\n  accessor coming = false;\n\n  @property({ type: Boolean, reflect: true })\n  accessor disabled = false;\n\n  @property({ attribute: false })\n  accessor hover = true;\n\n  @property({ attribute: false })\n  accessor hoverState = false;\n\n  @property({ attribute: false })\n  accessor iconContainerPadding: number | number[] = 2;\n\n  @property({ attribute: false })\n  accessor iconContainerWidth: string | undefined = undefined;\n\n  @property({ attribute: false })\n  accessor iconSize: string | undefined = undefined;\n\n  @property({ attribute: false })\n  accessor justify: string | undefined = undefined;\n\n  @property({ attribute: false })\n  accessor labelHeight: string | undefined = undefined;\n\n  @property({ type: Boolean })\n  accessor showTooltip = true;\n\n  @property({ attribute: false })\n  accessor tipPosition: Placement = 'top';\n\n  @property({ attribute: false })\n  accessor tooltip!: string | TemplateResult<1>;\n\n  @property({ attribute: false })\n  accessor tooltipOffset = 8;\n\n  @property({ attribute: false })\n  accessor withHover: boolean | undefined = undefined;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'editor-icon-button': EditorIconButton;\n  }\n}\n"]}