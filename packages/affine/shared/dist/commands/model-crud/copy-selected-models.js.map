{"version":3,"file":"copy-selected-models.js","sourceRoot":"","sources":["../../../src/commands/model-crud/copy-selected-models.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAE1C,MAAM,CAAC,MAAM,yBAAyB,GAAwC,CAC5E,GAAG,EACH,IAAI,EACJ,EAAE;IACF,MAAM,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC;IACjC,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,OAAO,CAAC,KAAK,CACX,wHAAwH,CACzH,CAAC;QACF,OAAO;IACT,CAAC;IAED,MAAM;SACH,IAAI,CAAC,MAAM,CAAC,EAAE;QACb,MAAM,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QAEpD,OAAO,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACvC,CAAC,CAAC;SACD,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC;SAC1B,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACxB,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import type { Command } from '@blocksuite/block-std';\n\nimport { Slice } from '@blocksuite/store';\n\nexport const copySelectedModelsCommand: Command<'draftedModels' | 'onCopy'> = (\n  ctx,\n  next\n) => {\n  const models = ctx.draftedModels;\n  if (!models) {\n    console.error(\n      '`draftedModels` is required, you need to use `draftSelectedModels` command before adding this command to the pipeline.'\n    );\n    return;\n  }\n\n  models\n    .then(models => {\n      const slice = Slice.fromModels(ctx.std.doc, models);\n\n      return ctx.std.clipboard.copy(slice);\n    })\n    .then(() => ctx.onCopy?.())\n    .catch(console.error);\n  return next();\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface CommandContext {\n      onCopy?: () => void;\n    }\n    interface Commands {\n      copySelectedModels: typeof copySelectedModelsCommand;\n    }\n  }\n}\n"]}