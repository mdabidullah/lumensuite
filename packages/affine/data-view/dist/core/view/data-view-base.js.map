{"version":3,"file":"data-view-base.js","sourceRoot":"","sources":["../../../src/core/view/data-view-base.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,OAAO,EACL,iBAAiB,EACjB,aAAa,EACb,cAAc,GACf,MAAM,uBAAuB,CAAC;AAC/B,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;IAUvB,YAAY;sBAIxB,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBAJpC,YAIpB,SAAQ,WAAgD;;;sCASvD,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;uCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;uCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;wCAM9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;qCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;kCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCAI9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;wCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;+BAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;gCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YApC/B,mLAAS,UAAU,6BAAV,UAAU,+FAA2D;YAG9E,mLAAS,UAAU,6BAAV,UAAU,+FAAc;YAGjC,sLAAS,WAAW,6BAAX,WAAW,iGAAoB;YAGxC,sLAAS,WAAW,6BAAX,WAAW,iGAGJ;YAGhB,yLAAS,YAAY,6BAAZ,YAAY,mGAAkB;YAGvC,gLAAS,SAAS,6BAAT,SAAS,6FAAkC;YAGpD,uKAAS,MAAM,6BAAN,MAAM,uFACH;YAGZ,mLAAS,UAAU,6BAAV,UAAU,+FAAyC;YAG5D,yLAAS,YAAY,6BAAZ,YAAY,mGAAmC;YAGxD,8JAAS,GAAG,6BAAH,GAAG,iFAAiB;YAG7B,iKAAS,IAAI,6BAAJ,IAAI,mFAAK;YAGlB,mLAAS,UAAU,6BAAV,UAAU,+FAAe;;;QArClC,yFAA8E;QAA9E,IAAS,UAAU,gDAA2D;QAA9E,IAAS,UAAU,sDAA2D;QAG9E,mJAAiC;QAAjC,IAAS,UAAU,gDAAc;QAAjC,IAAS,UAAU,sDAAc;QAGjC,qJAAwC;QAAxC,IAAS,WAAW,iDAAoB;QAAxC,IAAS,WAAW,uDAAoB;QAGxC,sJAGgB;QAHhB,IAAS,WAAW,iDAGJ;QAHhB,IAAS,WAAW,uDAGJ;QAGhB,wJAAuC;QAAvC,IAAS,YAAY,kDAAkB;QAAvC,IAAS,YAAY,wDAAkB;QAGvC,0IAA0C,SAAS,GAAC;QAApD,IAAS,SAAS,+CAAkC;QAApD,IAAS,SAAS,qDAAkC;QAGpD,iIACE,SAAS,GAAC;QADZ,IAAS,MAAM,4CACH;QADZ,IAAS,MAAM,kDACH;QAGZ,+IAA4D;QAA5D,IAAS,UAAU,gDAAyC;QAA5D,IAAS,UAAU,sDAAyC;QAG5D,uJAAwD;QAAxD,IAAS,YAAY,kDAAmC;QAAxD,IAAS,YAAY,wDAAmC;QAGxD,uIAA6B;QAA7B,IAAS,GAAG,yCAAiB;QAA7B,IAAS,GAAG,+CAAiB;QAG7B,gIAAkB;QAAlB,IAAS,IAAI,0CAAK;QAAlB,IAAS,IAAI,gDAAK;QAGlB,6IAAkC;QAAlC,IAAS,UAAU,gDAAe;QAAlC,IAAS,UAAU,sDAAe;;;;;;;SAnDd,YAAY","sourcesContent":["import type { InsertToPosition } from '@blocksuite/affine-shared/utils';\nimport type {\n  BlockStdScope,\n  EventName,\n  UIEventHandler,\n} from '@blocksuite/block-std';\nimport type { Disposable } from '@blocksuite/global/utils';\nimport type { ReadonlySignal } from '@lit-labs/preact-signals';\n\nimport {\n  ShadowlessElement,\n  SignalWatcher,\n  WithDisposable,\n} from '@blocksuite/block-std';\nimport { property } from 'lit/decorators.js';\n\nimport type { DataSource } from '../common/data-source/base.js';\nimport type { DataViewRenderer } from '../data-view.js';\nimport type { DataViewSelection } from '../types.js';\nimport type { SingleView } from '../view-manager/single-view.js';\nimport type { ViewManager } from '../view-manager/view-manager.js';\nimport type { DataViewWidget } from '../widget/types.js';\nimport type { DataViewExpose, DataViewProps } from './data-view.js';\n\nexport abstract class DataViewBase<\n    T extends SingleView = SingleView,\n    Selection extends DataViewSelection = DataViewSelection,\n  >\n  extends SignalWatcher(WithDisposable(ShadowlessElement))\n  implements DataViewProps<T, Selection>, DataViewExpose\n{\n  addRow?(position: InsertToPosition): void;\n\n  abstract focusFirstCell(): void;\n\n  abstract getSelection(): Selection | undefined;\n\n  @property({ attribute: false })\n  accessor bindHotkey!: (hotkeys: Record<string, UIEventHandler>) => Disposable;\n\n  @property({ attribute: false })\n  accessor dataSource!: DataSource;\n\n  @property({ attribute: false })\n  accessor dataViewEle!: DataViewRenderer;\n\n  @property({ attribute: false })\n  accessor handleEvent!: (\n    name: EventName,\n    handler: UIEventHandler\n  ) => Disposable;\n\n  @property({ attribute: false })\n  accessor headerWidget!: DataViewWidget;\n\n  @property({ attribute: false })\n  accessor modalMode: boolean | undefined = undefined;\n\n  @property({ attribute: false })\n  accessor onDrag: ((evt: MouseEvent, id: string) => () => void) | undefined =\n    undefined;\n\n  @property({ attribute: false })\n  accessor selection$!: ReadonlySignal<Selection | undefined>;\n\n  @property({ attribute: false })\n  accessor setSelection!: (selection?: Selection) => void;\n\n  @property({ attribute: false })\n  accessor std!: BlockStdScope;\n\n  @property({ attribute: false })\n  accessor view!: T;\n\n  @property({ attribute: false })\n  accessor viewSource!: ViewManager;\n}\n"]}