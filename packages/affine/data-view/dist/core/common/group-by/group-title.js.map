{"version":3,"file":"group-title.js","sourceRoot":"","sources":["../../../../src/core/common/group-by/group-title.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACrE,OAAO,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AAC9B,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAK1C,OAAO,EAAE,YAAY,EAAE,MAAM,4CAA4C,CAAC;AAE1E,SAAS,gBAAgB,CAAC,KAAgB;IACxC,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;IACzB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QAClB,OAAO;IACT,CAAC;IACD,OAAO,IAAI,CAAA,oCAAoC,KAAK,CAAC,MAAM,QAAQ,CAAC;AACtE,CAAC;AAED,MAAM,UAAU,UAAU,CACxB,SAAoB,EACpB,GAIC;IAED,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC;IAC7C,IAAI,CAAC,IAAI;QAAE,OAAO,OAAO,CAAC;IAE1B,MAAM,IAAI,GACR,SAAS,CAAC,KAAK,IAAI,IAAI;QACrB,CAAC,CAAC,EAAE;QACJ,CAAC,CAAC,IAAI,CAAA;;kBAEM,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI;oBACnC,CAAC;IACnB,MAAM,KAAK,GAAqB;QAC9B,KAAK,EAAE,SAAS,CAAC,KAAK;QACtB,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK;QAClC,UAAU,EAAE,SAAS,CAAC,OAAO,CAAC,UAAU;QACxC,WAAW,EAAE,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC;QAC1E,QAAQ,EAAE,GAAG,CAAC,QAAQ;KACvB,CAAC;IAEF,OAAO,IAAI,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA+DL,IAAI,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,gBAAgB,CAAC,SAAS,CAAC;;MAEvE,GAAG,CAAC,QAAQ;QACZ,CAAC,CAAC,OAAO;QACT,CAAC,CAAC,IAAI,CAAA;yBACa,GAAG,CAAC,QAAQ;cACvB,QAAQ,EAAE;;yBAEC,GAAG,CAAC,QAAQ;cACvB,kBAAkB,EAAE;;eAEnB;GACZ,CAAC;AACJ,CAAC","sourcesContent":["import { MoreHorizontalIcon, PlusIcon } from '@blocksuite/icons/lit';\nimport { nothing } from 'lit';\nimport { html } from 'lit/static-html.js';\n\nimport type { GroupData } from './helper.js';\nimport type { GroupRenderProps } from './matcher.js';\n\nimport { renderUniLit } from '../../utils/uni-component/uni-component.js';\n\nfunction GroupHeaderCount(group: GroupData) {\n  const cards = group.rows;\n  if (!cards.length) {\n    return;\n  }\n  return html` <div class=\"group-header-count\">${cards.length}</div>`;\n}\n\nexport function GroupTitle(\n  groupData: GroupData,\n  ops: {\n    readonly: boolean;\n    clickAdd: (evt: MouseEvent) => void;\n    clickOps: (evt: MouseEvent) => void;\n  }\n) {\n  const data = groupData.manager.config$.value;\n  if (!data) return nothing;\n\n  const icon =\n    groupData.value == null\n      ? ''\n      : html` <uni-lit\n          class=\"group-header-icon\"\n          .uni=\"${groupData.manager.column$.value?.icon}\"\n        ></uni-lit>`;\n  const props: GroupRenderProps = {\n    value: groupData.value,\n    data: groupData.column.data$.value,\n    updateData: groupData.manager.updateData,\n    updateValue: value => groupData.manager.updateValue(groupData.rows, value),\n    readonly: ops.readonly,\n  };\n\n  return html`\n    <style>\n      .group-header-count {\n        flex-shrink: 0;\n        width: 20px;\n        height: 20px;\n        border-radius: 4px;\n        background-color: var(--affine-background-secondary-color);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: var(--affine-text-secondary-color);\n        font-size: var(--data-view-cell-text-size);\n      }\n\n      .group-header-name {\n        flex: 1;\n        overflow: hidden;\n      }\n\n      .group-header-ops {\n        display: flex;\n        align-items: center;\n      }\n\n      .group-header-op {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        padding: 4px;\n        border-radius: 4px;\n        visibility: hidden;\n        opacity: 0;\n        transition: all 150ms cubic-bezier(0.42, 0, 1, 1);\n      }\n\n      .group-header-icon {\n        display: flex;\n        align-items: center;\n        margin-right: -4px;\n      }\n\n      .group-header-icon svg {\n        width: 16px;\n        height: 16px;\n        color: var(--affine-icon-color);\n        fill: var(--affine-icon-color);\n      }\n\n      .group-header-op:hover {\n        background-color: var(--affine-hover-color);\n      }\n\n      .group-header-op svg {\n        width: 16px;\n        height: 16px;\n        fill: var(--affine-icon-color);\n        color: var(--affine-icon-color);\n      }\n    </style>\n    <div\n      style=\"display:flex;align-items:center;gap: 8px;overflow: hidden;height: 22px;\"\n    >\n      ${icon} ${renderUniLit(data.view, props)} ${GroupHeaderCount(groupData)}\n    </div>\n    ${ops.readonly\n      ? nothing\n      : html` <div class=\"group-header-ops\">\n          <div @click=\"${ops.clickAdd}\" class=\"group-header-op add-card\">\n            ${PlusIcon()}\n          </div>\n          <div @click=\"${ops.clickOps}\" class=\"group-header-op\">\n            ${MoreHorizontalIcon()}\n          </div>\n        </div>`}\n  `;\n}\n"]}