{"version":3,"file":"select-group.js","sourceRoot":"","sources":["../../../../../src/core/common/group-by/renderer/select-group.ts"],"names":[],"mappings":"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","sourcesContent":["import { popMenu } from '@blocksuite/affine-components/context-menu';\nimport { css, html } from 'lit';\nimport { customElement } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\nimport type { SelectTag } from '../../../utils/tags/multi-tag-select.js';\n\nimport { selectOptionColors } from '../../../utils/tags/colors.js';\nimport { BaseGroup } from './base.js';\n\n@customElement('data-view-group-title-select-view')\nexport class SelectGroupView extends BaseGroup<\n  {\n    options: SelectTag[];\n  },\n  string\n> {\n  static override styles = css`\n    data-view-group-title-select-view {\n      overflow: hidden;\n    }\n    .data-view-group-title-select-view {\n      width: 100%;\n      cursor: pointer;\n    }\n\n    .data-view-group-title-select-view.readonly {\n      cursor: inherit;\n    }\n\n    .tag {\n      padding: 0 8px;\n      border-radius: 4px;\n      font-size: var(--data-view-cell-text-size);\n      line-height: var(--data-view-cell-text-line-height);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  `;\n\n  private _click = () => {\n    if (this.readonly) {\n      return;\n    }\n    popMenu(this, {\n      options: {\n        input: {\n          initValue: this.tag?.value ?? '',\n          onComplete: text => {\n            this.updateTag({ value: text });\n          },\n        },\n        items: selectOptionColors.map(({ color, name }) => {\n          const styles = styleMap({\n            backgroundColor: color,\n            borderRadius: '50%',\n            width: '20px',\n            height: '20px',\n          });\n          return {\n            type: 'action',\n            name: name,\n            isSelected: this.tag?.color === color,\n            icon: html` <div style=${styles}></div>`,\n            select: () => {\n              this.updateTag({ color });\n            },\n          };\n        }),\n      },\n    });\n  };\n\n  get tag() {\n    return this.data.options.find(v => v.id === this.value);\n  }\n\n  protected override render(): unknown {\n    const tag = this.tag;\n    if (!tag) {\n      return html` <div\n        style=\"font-size: 14px;color: var(--affine-text-primary-color);line-height: 22px;\"\n      >\n        Ungroups\n      </div>`;\n    }\n    const style = styleMap({\n      backgroundColor: tag.color,\n    });\n    const classList = classMap({\n      'data-view-group-title-select-view': true,\n      readonly: this.readonly,\n    });\n    return html` <div @click=\"${this._click}\" class=\"${classList}\">\n      <div class=\"tag\" style=\"${style}\">${tag.value}</div>\n    </div>`;\n  }\n\n  updateTag(tag: Partial<SelectTag>) {\n    this.updateData?.({\n      ...this.data,\n      options: this.data.options.map(v => {\n        if (v.id === this.value) {\n          return {\n            ...v,\n            ...tag,\n          };\n        }\n        return v;\n      }),\n    });\n  }\n}\n"]}