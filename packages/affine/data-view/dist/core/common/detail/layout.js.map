{"version":3,"file":"layout.js","sourceRoot":"","sources":["../../../../src/core/common/detail/layout.ts"],"names":[],"mappings":"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","sourcesContent":["import { createModal } from '@lumensuite/affine-components/context-menu';\nimport { ShadowlessElement } from '@lumensuite/block-std';\nimport { CloseIcon } from '@blocksuite/icons/lit';\nimport {\n  autoUpdate,\n  computePosition,\n  type ReferenceElement,\n  size,\n} from '@floating-ui/dom';\nimport { css, html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport type { SingleView } from '../../view-manager/single-view.js';\n\nimport { RecordDetail } from './detail.js';\n\n@customElement('side-layout-modal')\nclass SideLayoutModal extends ShadowlessElement {\n  static override styles = css`\n    side-layout-modal {\n      display: flex;\n      flex-direction: column;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      width: 1200px;\n      background-color: var(--affine-background-overlay-panel-color);\n      border-left: 0.5px solid var(--affine-border-color);\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);\n    }\n\n    .side-modal-content {\n      flex: 1;\n      overflow-y: auto;\n    }\n\n    .side-modal-header {\n      padding: 12px;\n      display: flex;\n      align-items: center;\n    }\n\n    .header-ops {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .header-op {\n      display: flex;\n      align-items: center;\n      padding: 2px;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n\n    .header-op svg {\n      width: 20px;\n      height: 20px;\n      color: var(--affine-icon-color);\n    }\n\n    .header-op:hover {\n      background-color: var(--affine-hover-color);\n    }\n  `;\n\n  override render() {\n    return html`\n      <div class=\"side-modal-header\">\n        <div @click=\"${this.close}\" class=\"close-modal header-op\">\n          ${CloseIcon()}\n        </div>\n        <div class=\"header-ops\">${this.renderOps()}</div>\n      </div>\n      <div class=\"side-modal-content\">${this.content}</div>\n    `;\n  }\n\n  renderOps() {\n    return html``;\n    // return html`\n    //   <div class='header-op' style='transform: rotate(180deg)'>\n    //     ${arrowUp}\n    //   </div>\n    //   <div class='header-op'>${arrowUp}</div>`;\n  }\n\n  @property({ attribute: false })\n  accessor close: (() => void) | undefined = undefined;\n\n  @property({ attribute: false })\n  accessor content: HTMLElement | undefined = undefined;\n}\n\nexport const popSideDetail = (ops: {\n  target: ReferenceElement;\n  view: SingleView;\n  rowId: string;\n  onClose?: () => void;\n}) => {\n  const modal = createModal(document.body);\n  // fit to the size of the body element\n  const cancel = autoUpdate(ops.target, modal, () => {\n    computePosition(ops.target, modal, {\n      middleware: [\n        size({\n          apply: ({ rects }) => {\n            Object.assign(modal.style, {\n              left: `${rects.reference.x}px`,\n              top: `${rects.reference.y}px`,\n              width: `${rects.reference.width}px`,\n              height: `${rects.reference.height}px`,\n            });\n          },\n        }),\n      ],\n    }).catch(console.error);\n  });\n  const close = () => {\n    modal.remove();\n    ops.onClose?.();\n    cancel();\n  };\n  const detail = new RecordDetail();\n  detail.view = ops.view;\n  detail.rowId = ops.rowId;\n  const sideContainer = new SideLayoutModal();\n  sideContainer.content = detail;\n  sideContainer.close = close;\n  modal.onclick = e => e.target === modal && close();\n  modal.append(sideContainer);\n};\n\nexport const createRecordDetail = (ops: {\n  view: SingleView;\n  rowId: string;\n}) => {\n  return html`<affine-data-view-record-detail\n    .view=${ops.view}\n    .rowId=${ops.rowId}\n    class=\"data-view-popup-container\"\n  ></affine-data-view-record-detail>`;\n};\n"]}