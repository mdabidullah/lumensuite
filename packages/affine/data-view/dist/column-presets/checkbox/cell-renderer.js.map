{"version":3,"file":"cell-renderer.js","sourceRoot":"","sources":["../../../src/column-presets/checkbox/cell-renderer.ts"],"names":[],"mappings":"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","sourcesContent":["import { CheckBoxCkeckSolidIcon, CheckBoxUnIcon } from '@blocksuite/icons/lit';\nimport { css, html } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\nimport { BaseCellRenderer } from '../../core/column/index.js';\nimport { createFromBaseCellRenderer } from '../../core/column/renderer.js';\nimport { createIcon } from '../../core/utils/uni-icon.js';\nimport { checkboxColumnModelConfig } from './define.js';\n\nconst playCheckAnimation = async (\n  refElement: Element,\n  { left = 0, size = 20 }: { left?: number; size?: number } = {}\n) => {\n  const sparkingEl = document.createElement('div');\n  sparkingEl.classList.add('affine-check-animation');\n  if (size < 20) {\n    console.warn('If the size is less than 20, the animation may be abnormal.');\n  }\n  sparkingEl.style.cssText = `\n    position: absolute;\n    width: ${size}px;\n    height: ${size}px;\n    border-radius: 50%;\n  `;\n  sparkingEl.style.left = `${left}px`;\n  refElement.append(sparkingEl);\n\n  await sparkingEl.animate(\n    [\n      {\n        boxShadow:\n          '0 -18px 0 -8px #1e96eb, 16px -8px 0 -8px #1e96eb, 16px 8px 0 -8px #1e96eb, 0 18px 0 -8px #1e96eb, -16px 8px 0 -8px #1e96eb, -16px -8px 0 -8px #1e96eb',\n      },\n    ],\n    { duration: 240, easing: 'ease', fill: 'forwards' }\n  ).finished;\n  await sparkingEl.animate(\n    [\n      {\n        boxShadow:\n          '0 -36px 0 -10px transparent, 32px -16px 0 -10px transparent, 32px 16px 0 -10px transparent, 0 36px 0 -10px transparent, -32px 16px 0 -10px transparent, -32px -16px 0 -10px transparent',\n      },\n    ],\n    { duration: 360, easing: 'ease', fill: 'forwards' }\n  ).finished;\n\n  sparkingEl.remove();\n};\n\n@customElement('affine-database-checkbox-cell')\nexport class CheckboxCell extends BaseCellRenderer<boolean> {\n  static override styles = css`\n    affine-database-checkbox-cell {\n      display: block;\n      width: 100%;\n      cursor: pointer;\n    }\n\n    .affine-database-checkbox-container {\n      height: 100%;\n    }\n\n    .affine-database-checkbox {\n      display: flex;\n      align-items: center;\n      height: var(--data-view-cell-text-line-height);\n      width: 100%;\n      position: relative;\n    }\n    .affine-database-checkbox svg {\n      width: 16px;\n      height: 16px;\n    }\n  `;\n\n  override beforeEnterEditMode() {\n    const checked = !this.value;\n\n    this.onChange(checked);\n    if (checked) {\n      playCheckAnimation(this._checkbox, { left: -2 }).catch(console.error);\n    }\n    return false;\n  }\n\n  override onCopy(_e: ClipboardEvent) {\n    _e.preventDefault();\n  }\n\n  override onCut(_e: ClipboardEvent) {\n    _e.preventDefault();\n  }\n\n  override onPaste(_e: ClipboardEvent) {\n    _e.preventDefault();\n  }\n\n  override render() {\n    const checked = this.value ?? false;\n    const icon = checked\n      ? CheckBoxCkeckSolidIcon({ style: `color:#1E96EB` })\n      : CheckBoxUnIcon();\n    return html` <div class=\"affine-database-checkbox-container\">\n      <div\n        class=\"affine-database-checkbox checkbox ${checked ? 'checked' : ''}\"\n      >\n        ${icon}\n      </div>\n    </div>`;\n  }\n\n  @query('.affine-database-checkbox')\n  private accessor _checkbox!: HTMLDivElement;\n}\n\nexport const checkboxColumnConfig = checkboxColumnModelConfig.createColumnMeta({\n  icon: createIcon('CheckBoxCheckLinearIcon'),\n  cellRenderer: {\n    view: createFromBaseCellRenderer(CheckboxCell),\n  },\n});\n"]}