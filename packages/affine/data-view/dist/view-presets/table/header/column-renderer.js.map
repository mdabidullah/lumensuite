{"version":3,"file":"column-renderer.js","sourceRoot":"","sources":["../../../../src/view-presets/table/header/column-renderer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EACL,iBAAiB,EACjB,aAAa,EACb,cAAc,GACf,MAAM,uBAAuB,CAAC;AAC/B,OAAO,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAC1B,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAClD,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;IAM7B,qBAAqB;4BADjC,aAAa,CAAC,iCAAiC,CAAC;;;;sBACN,aAAa,CACtD,cAAc,CAAC,iBAAiB,CAAC,CAClC;;;;;;;;;;qCAFkC,SAAQ,WAE1C;;;;kCA2DE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;iCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;4CAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAL/B,uKAAS,MAAM,6BAAN,MAAM,uFAAU;YAGzB,oKAAS,KAAK,6BAAL,KAAK,qFAAe;YAG7B,qMAAS,gBAAgB,6BAAhB,gBAAgB,2GAAmB;YApE9C,6KAqEC;;;;iBAlEiB,WAAM,GAAG,GAAG,CAAA;;;;;GAK3B,AALqB,CAKpB;QAEM,WAAW,CAAC,IAAc;YAChC,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACzE,OAAO,IAAI,CAAA;;;;;+BAKgB,IAAI,CAAC,gBAAgB;qBAC/B,IAAI,CAAC,MAAM;;UAEtB,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE;gBAC3B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CACrC,+CAA+C,EAAE,IAAI,CACtD,EAAE,YAAY,CAAC;gBAChB,MAAM,KAAK,GAAG,QAAQ,CAAC;oBACrB,MAAM,EAAE,MAAM,GAAG,IAAI;iBACtB,CAAC,CAAC;gBACH,OAAO,IAAI,CAAA;;;0BAGK,KAAK;;2BAEJ,IAAI,CAAC,MAAM;yBACb,IAAI,CAAC,gBAAgB;0BACpB,EAAE;6BACC,IAAI,CAAC,MAAM,CAAC,EAAE;6BACd,KAAK;gCACF,WAAW;;;iBAG1B,CAAC;YACV,CAAC,CAAC;;;KAGL,CAAC;QACJ,CAAC;QAEQ,MAAM;YACb,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,CAAC;YACxE,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC;gBAC/C,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAChC,CAAC;YACD,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBACxB,OAAO,IAAI,CAAA;;UAEP,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC;OAC/B,CAAC;YACJ,CAAC,CAAC,CAAC;QACL,CAAC;QAGD,iFAAyB;QAAzB,IAAS,MAAM,4CAAU;QAAzB,IAAS,MAAM,kDAAU;QAGzB,qIAA6B;QAA7B,IAAS,KAAK,2CAAe;QAA7B,IAAS,KAAK,iDAAe;QAG7B,0JAA4C;QAA5C,IAAS,gBAAgB,sDAAmB;QAA5C,IAAS,gBAAgB,4DAAmB;;;;;;YApEjC,uDAAqB;;;;;SAArB,qBAAqB","sourcesContent":["import {\n  ShadowlessElement,\n  SignalWatcher,\n  WithDisposable,\n} from '@blocksuite/block-std';\nimport { css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { html } from 'lit/static-html.js';\n\nimport type { Column } from '../../../core/view-manager/column.js';\nimport type { TableSingleView } from '../table-view-manager.js';\n\n@customElement('affine-data-view-column-preview')\nexport class DataViewColumnPreview extends SignalWatcher(\n  WithDisposable(ShadowlessElement)\n) {\n  static override styles = css`\n    affine-data-view-column-preview {\n      pointer-events: none;\n      display: block;\n    }\n  `;\n\n  private renderGroup(rows: string[]) {\n    const columnIndex = this.tableViewManager.columnGetIndex(this.column.id);\n    return html`\n      <div\n        style=\"background-color: var(--affine-background-primary-color);border-top: 1px solid var(--affine-border-color);box-shadow: var(--affine-shadow-2);\"\n      >\n        <affine-database-header-column\n          .tableViewManager=\"${this.tableViewManager}\"\n          .column=\"${this.column}\"\n        ></affine-database-header-column>\n        ${repeat(rows, (id, index) => {\n          const height = this.table.querySelector(\n            `affine-database-cell-container[data-row-id=\"${id}\"]`\n          )?.clientHeight;\n          const style = styleMap({\n            height: height + 'px',\n          });\n          return html`<div\n            style=\"border-top: 1px solid var(--affine-border-color)\"\n          >\n            <div style=\"${style}\">\n              <affine-database-cell-container\n                .column=\"${this.column}\"\n                .view=\"${this.tableViewManager}\"\n                .rowId=\"${id}\"\n                .columnId=\"${this.column.id}\"\n                .rowIndex=\"${index}\"\n                .columnIndex=\"${columnIndex}\"\n              ></affine-database-cell-container>\n            </div>\n          </div>`;\n        })}\n      </div>\n      <div style=\"height: 45px;\"></div>\n    `;\n  }\n\n  override render() {\n    const groups = this.tableViewManager.groupManager.groupsDataList$.value;\n    if (!groups) {\n      const rows = this.tableViewManager.rows$.value;\n      return this.renderGroup(rows);\n    }\n    return groups.map(group => {\n      return html`\n        <div style=\"height: 44px;\"></div>\n        ${this.renderGroup(group.rows)}\n      `;\n    });\n  }\n\n  @property({ attribute: false })\n  accessor column!: Column;\n\n  @property({ attribute: false })\n  accessor table!: HTMLElement;\n\n  @property({ attribute: false })\n  accessor tableViewManager!: TableSingleView;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'affine-data-view-column-preview': DataViewColumnPreview;\n  }\n}\n"]}