{"version":3,"file":"gfx-compatible.js","sourceRoot":"","sources":["../../src/utils/gfx-compatible.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,oBAAoB,EAAE,MAAM,2BAA2B,CAAC;AACjE,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAO/C,MAAM,UAAU,aAAa,CAG3B,oBAAuB;IACvB,IAAI,oBAAoB,KAAK,UAAU,EAAE,CAAC;QACxC,OAAO,oBAAqE,CAAC;IAC/E,CAAC;SAAM,CAAC;QACN,IAAI,YAAY,GAAG,oBAAoB,CAAC;QAExC,OACE,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,UAAU,CAAC,SAAS;YACtE,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,EACtD,CAAC;YACD,YAAY,GAAG,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC;QAC3E,CAAC;QAED,IAAI,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,IAAI,EAAE,CAAC;YAC3D,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;QACpE,CAAC;QAED,MAAM,CAAC,cAAc,CACnB,YAAY,CAAC,SAAS,EACtB,oBAAoB,CAAC,SAAS,CAC/B,CAAC;IACJ,CAAC;IAED,OAAO,oBAAqE,CAAC;AAC/E,CAAC","sourcesContent":["import type { Constructor, SerializedXYWH } from '@lumensuite/global/utils';\n\nimport { GfxBlockElementModel } from '@lumensuite/block-std/gfx';\nimport { BlockModel } from '@lumensuite/store';\n\nexport type GfxCompatibleProps = {\n  xywh: SerializedXYWH;\n  index: string;\n};\n\nexport function GfxCompatible<\n  Props extends GfxCompatibleProps,\n  T extends Constructor<BlockModel<Props>> = Constructor<BlockModel<Props>>,\n>(BlockModelSuperClass: T) {\n  if (BlockModelSuperClass === BlockModel) {\n    return GfxBlockElementModel as unknown as typeof GfxBlockElementModel<Props>;\n  } else {\n    let currentClass = BlockModelSuperClass;\n\n    while (\n      Object.getPrototypeOf(currentClass.prototype) !== BlockModel.prototype &&\n      Object.getPrototypeOf(currentClass.prototype) !== null\n    ) {\n      currentClass = Object.getPrototypeOf(currentClass.prototype).constructor;\n    }\n\n    if (Object.getPrototypeOf(currentClass.prototype) === null) {\n      throw new Error('The SuperClass is not a subclass of BlockModel');\n    }\n\n    Object.setPrototypeOf(\n      currentClass.prototype,\n      GfxBlockElementModel.prototype\n    );\n  }\n\n  return BlockModelSuperClass as unknown as typeof GfxBlockElementModel<Props>;\n}\n"]}