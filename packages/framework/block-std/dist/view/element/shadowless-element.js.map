{"version":3,"file":"shadowless-element.js","sourceRoot":"","sources":["../../../src/view/element/shadowless-element.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAE5C,MAAM,OAAO,iBAAkB,SAAQ,UAAU;aACxC,sBAAiB,GAAG,IAAI,CAAC;IAEtB,MAAM,CAAU,cAAc,CACtC,MAAuB;QAEvB,IAAI,aAAa,GAAG,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,+EAA+E;YAC/E,0CAA0C;YAC1C,aAAa,CAAC,OAAO,CAAC,CAAC,CAAoB,EAAE,EAAE;gBAC7C,IAAI,CAAC,YAAY,SAAS,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,CAAC;oBAC9D,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;oBAChC,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;oBAC9C,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,OAAO,CAAC;oBAC9B,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAC1B,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;gBAC/B,CAAC;YACH,CAAC,CAAC,CAAC;YACH,aAAa,GAAG,EAAE,CAAC;QACrB,CAAC;QACD,OAAO,aAAa,CAAC;IACvB,CAAC;IAEQ,gBAAgB;QACvB,OAAQ,IAAI,CAAC,WAAwC,CAAC,iBAAiB;YACrE,CAAC,CAAC,IAAI;YACN,CAAC,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;IAC/B,CAAC","sourcesContent":["import type { CSSResultGroup, CSSResultOrNative } from 'lit';\n\nimport { CSSResult, LitElement } from 'lit';\n\nexport class ShadowlessElement extends LitElement {\n  static disableShadowRoot = true;\n\n  protected static override finalizeStyles(\n    styles?: CSSResultGroup\n  ): CSSResultOrNative[] {\n    let elementStyles = super.finalizeStyles(styles);\n    if (this.disableShadowRoot) {\n      // XXX: This breaks component encapsulation and applies styles to the document.\n      // These styles should be manually scoped.\n      elementStyles.forEach((s: CSSResultOrNative) => {\n        if (s instanceof CSSResult && typeof document !== 'undefined') {\n          const styleRoot = document.head;\n          const style = document.createElement('style');\n          style.textContent = s.cssText;\n          styleRoot.append(style);\n        } else {\n          console.error('unreachable');\n        }\n      });\n      elementStyles = [];\n    }\n    return elementStyles;\n  }\n\n  override createRenderRoot() {\n    return (this.constructor as typeof ShadowlessElement).disableShadowRoot\n      ? this\n      : super.createRenderRoot();\n  }\n}\n"]}