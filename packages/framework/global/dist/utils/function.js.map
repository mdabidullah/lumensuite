{"version":3,"file":"function.js","sourceRoot":"","sources":["../../src/utils/function.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,KAAK,UAAU,KAAK,CAAC,EAAU,EAAE,MAAoB;IAC1D,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;QAC3B,IAAI,MAAM,EAAE,OAAO,EAAE,CAAC;YACpB,OAAO,EAAE,CAAC;YACV,OAAO;QACT,CAAC;QACD,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,MAAM,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;YACrC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACd,YAAY,CAAC,MAAM,CAAC,CAAC;gBACrB,OAAO,EAAE,CAAC;YACZ,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,UAAU,CAAC,GAAG,EAAE;YAC7B,QAAQ,GAAG,IAAI,CAAC;YAChB,OAAO,EAAE,CAAC;QACZ,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,IAAI,CAAC,CAAW;IAC9B,OAAO;AACT,CAAC;AA8BD,MAAM,UAAU,QAAQ,CAGtB,EAAK,EAAE,KAAa,EAAE,EAAE,OAAO,GAAG,IAAI,EAAE,QAAQ,GAAG,IAAI,EAAE,GAAG,EAAE;IAC9D,IAAI,KAAK,GAAyC,IAAI,CAAC;IACvD,IAAI,QAAQ,GAAgB,IAAI,CAAC;IAEjC,MAAM,QAAQ,GAAG,GAAG,EAAE;QACpB,IAAI,QAAQ,IAAI,QAAQ,EAAE,CAAC;YACzB,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC;YAChB,QAAQ,GAAG,IAAI,CAAC;YAChB,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACtC,CAAC;aAAM,CAAC;YACN,KAAK,GAAG,IAAI,CAAC;QACf,CAAC;IACH,CAAC,CAAC;IAEF,OAAO,UAAyB,GAAG,IAAmB;QACpD,IAAI,KAAK,EAAE,CAAC;YACV,cAAc;YACd,QAAQ,GAAG,IAAI,CAAC;YAChB,OAAO;QACT,CAAC;QACD,2CAA2C;QAC3C,IAAI,OAAO,EAAE,CAAC;YACZ,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACvB,CAAC;QACD,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IACtC,CAAM,CAAC;AACT,CAAC;AAED,8DAA8D;AAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,CACtB,EAAK,EACL,KAAa,EACb,EAAE,OAAO,GAAG,IAAI,EAAE,QAAQ,GAAG,IAAI,EAAE,GAAG,EAAE,EACrC,EAAE;IACL,IAAI,KAAK,GAAyC,IAAI,CAAC;IACvD,IAAI,QAAQ,GAAyB,IAAI,CAAC;IAE1C,MAAM,QAAQ,GAAG,GAAG,EAAE;QACpB,IAAI,QAAQ,IAAI,QAAQ,EAAE,CAAC;YACzB,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC;YAChB,QAAQ,GAAG,IAAI,CAAC;YAChB,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACtC,CAAC;aAAM,CAAC;YACN,KAAK,GAAG,IAAI,CAAC;QACf,CAAC;IACH,CAAC,CAAC;IAEF,OAAO,UAAU,GAAG,IAAmB;QACrC,IAAI,KAAK,EAAE,CAAC;YACV,QAAQ,GAAG,IAAI,CAAC;YAChB,YAAY,CAAC,KAAK,CAAC,CAAC;QACtB,CAAC;QACD,IAAI,OAAO,IAAI,CAAC,KAAK,EAAE,CAAC;YACtB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;QACd,CAAC;QACD,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IACtC,CAAM,CAAC;AACT,CAAC,CAAC","sourcesContent":["export async function sleep(ms: number, signal?: AbortSignal): Promise<void> {\n  return new Promise(resolve => {\n    if (signal?.aborted) {\n      resolve();\n      return;\n    }\n    let resolved = false;\n    signal?.addEventListener('abort', () => {\n      if (!resolved) {\n        clearTimeout(timeId);\n        resolve();\n      }\n    });\n\n    const timeId = setTimeout(() => {\n      resolved = true;\n      resolve();\n    }, ms);\n  });\n}\n\nexport function noop(_?: unknown) {\n  return;\n}\n\n/**\n * @example\n * ```ts\n * const log = (message: string) => console.log(`[${new Date().toISOString()}] ${message}`);\n *\n * const throttledLog = throttle(log, 1000);\n *\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * throttledLog(\"Hello, world!\");\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function throttle<T extends (...args: any[]) => any>(\n  fn: T,\n  limit: number,\n  options?: { leading?: boolean; trailing?: boolean }\n): T;\nexport function throttle<\n  Args extends unknown[],\n  T extends (...args: Args) => void,\n>(\n  fn: (...args: Args) => void,\n  limit: number,\n  options?: { leading?: boolean; trailing?: boolean }\n): T;\nexport function throttle<\n  Args extends unknown[],\n  T extends (this: unknown, ...args: Args) => void,\n>(fn: T, limit: number, { leading = true, trailing = true } = {}): T {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  let lastArgs: Args | null = null;\n\n  const setTimer = () => {\n    if (lastArgs && trailing) {\n      fn(...lastArgs);\n      lastArgs = null;\n      timer = setTimeout(setTimer, limit);\n    } else {\n      timer = null;\n    }\n  };\n\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (timer) {\n      // in throttle\n      lastArgs = args;\n      return;\n    }\n    // Execute the function on the leading edge\n    if (leading) {\n      fn.apply(this, args);\n    }\n    timer = setTimeout(setTimer, limit);\n  } as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const debounce = <T extends (...args: any[]) => void>(\n  fn: T,\n  limit: number,\n  { leading = true, trailing = true } = {}\n): T => {\n  let timer: ReturnType<typeof setTimeout> | null = null;\n  let lastArgs: Parameters<T> | null = null;\n\n  const setTimer = () => {\n    if (lastArgs && trailing) {\n      fn(...lastArgs);\n      lastArgs = null;\n      timer = setTimeout(setTimer, limit);\n    } else {\n      timer = null;\n    }\n  };\n\n  return function (...args: Parameters<T>) {\n    if (timer) {\n      lastArgs = args;\n      clearTimeout(timer);\n    }\n    if (leading && !timer) {\n      fn(...args);\n    }\n    timer = setTimeout(setTimer, limit);\n  } as T;\n};\n"]}