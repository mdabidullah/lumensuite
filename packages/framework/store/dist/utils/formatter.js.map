{"version":3,"file":"formatter.js","sourceRoot":"","sources":["../../src/utils/formatter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAE/C,SAAS,YAAY,CAAC,CAAU;IAC9B,OAAO,CAAC,YAAY,UAAU,CAAC;AACjC,CAAC;AAED;;;;GAIG;AACH,SAAS,mBAAmB;IAC1B,IACE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,CAAC;QACzC,OAAO,MAAM,KAAK,WAAW,EAC7B,CAAC;QACD,OAAO;IACT,CAAC;IAED,MAAM,WAAW,GAAG;QAClB,KAAK,EACH,uFAAuF;KAC1F,CAAC;IACF,MAAM,SAAS,GAAG;QAChB,KAAK,EACH,uFAAuF;KAC1F,CAAC;IAEF,8BAA8B;IAC9B,uFAAuF;IACvF,MAAM,SAAS,GAAG;QAChB,MAAM,CAAC,GAAY,EAAE,MAAM,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE;YAC7C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;gBACxC,OAAO,IAAI,CAAC;YACd,CAAC;YACD,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC;gBACb,OAAO;oBACL,KAAK;oBACL,EAAE;oBACF,CAAC,MAAM,EAAE,WAAW,EAAE,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC;oBAC3C,CAAC,MAAM,EAAE,SAAS,EAAE,GAAG,CAAC,OAAO,CAAC;oBAChC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;iBACpB,CAAC;YACJ,CAAC;YAED,OAAO;gBACL,KAAK;gBACL,EAAE;gBACF,CAAC,MAAM,EAAE,WAAW,EAAE,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC;gBAC3C,CAAC,MAAM,EAAE,SAAS,EAAE,GAAG,CAAC,OAAO,CAAC;aACjC,CAAC;QACJ,CAAC;QACD,OAAO;YACL,OAAO,IAAI,CAAC;QACd,CAAC;QACD,IAAI,CAAC,GAAY;YACf,OAAO,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC/D,CAAC;KACF,CAAC;IAEF,8DAA8D;IAC9D,IAAK,MAAc,CAAC,kBAAkB,EAAE,CAAC;QACvC,8DAA8D;QAC7D,MAAc,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACrD,CAAC;SAAM,CAAC;QACN,8DAA8D;QAC7D,MAAc,CAAC,kBAAkB,GAAG,CAAC,SAAS,CAAC,CAAC;IACnD,CAAC;AACH,CAAC;AAED,mBAAmB,EAAE,CAAC","sourcesContent":["import { BlockModel } from '../schema/base.js';\n\nfunction isBlockModel(a: unknown): a is BlockModel {\n  return a instanceof BlockModel;\n}\n\n/**\n * Ported from https://github.com/vuejs/core/blob/main/packages/runtime-core/src/customFormatter.ts\n *\n * See [Custom Object Formatters in Chrome DevTools](https://docs.google.com/document/d/1FTascZXT9cxfetuPRT2eXPQKXui4nWFivUnS_335T3U)\n */\nfunction initCustomFormatter() {\n  if (\n    !(process.env.NODE_ENV === 'development') ||\n    typeof window === 'undefined'\n  ) {\n    return;\n  }\n\n  const bannerStyle = {\n    style:\n      'color: #eee; background: #3F6FDB; margin-right: 5px; padding: 2px; border-radius: 4px',\n  };\n  const typeStyle = {\n    style:\n      'color: #eee; background: #DB6D56; margin-right: 5px; padding: 2px; border-radius: 4px',\n  };\n\n  // custom formatter for Chrome\n  // https://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html\n  const formatter = {\n    header(obj: unknown, config = { expand: false }) {\n      if (!isBlockModel(obj) || config.expand) {\n        return null;\n      }\n      if (obj.text) {\n        return [\n          'div',\n          {},\n          ['span', bannerStyle, obj.constructor.name],\n          ['span', typeStyle, obj.flavour],\n          obj.text.toString(),\n        ];\n      }\n\n      return [\n        'div',\n        {},\n        ['span', bannerStyle, obj.constructor.name],\n        ['span', typeStyle, obj.flavour],\n      ];\n    },\n    hasBody() {\n      return true;\n    },\n    body(obj: unknown) {\n      return ['object', { object: obj, config: { expand: true } }];\n    },\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if ((window as any).devtoolsFormatters) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).devtoolsFormatters.push(formatter);\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).devtoolsFormatters = [formatter];\n  }\n}\n\ninitCustomFormatter();\n"]}